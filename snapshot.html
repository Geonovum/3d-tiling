<!DOCTYPE html><html lang="nl"><head>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta content="text/html; charset=utf-8" http-equiv="content-type">
<meta name="generator" content="ReSpec 35.1.1">
<style>
.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.issue.closed span.issue-number::after{content:" (Closed)";font-size:smaller}
.warning{border-color:#f11;border-color:var(--warning-border,#f11);border-width:.2em;border-style:solid;background:#fbe9e9;background:var(--warning-bg,#fbe9e9);color:#000;color:var(--text,#000)}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
</style>
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;background:var(--indextable-hover-bg,#fff);color:#000;color:var(--text,#000);box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);box-shadow:0 1em 3em -.4em var(--tocsidebar-shadow,rgba(0,0,0,.3)),0 0 1px 1px var(--tocsidebar-shadow,rgba(0,0,0,.05));border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;border-bottom-color:var(--indextable-hover-bg,#fff);top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1;border-bottom-color:var(--indextable-hover-bg,#a2a9b1)}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;color:var(--text,#000);margin-top:.25em}
.dfn-panel ul a[href]{color:#333;color:var(--text,#333)}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
  
  
  
  
  
  
  
<script>document.title = respecConfig.title</script>
<title>Handreiking 3D Tiling</title>
  
  
<link rel="stylesheet" href="https://tools.geostandaarden.nl/publication/organisation/geonovum/base.css">
  
  
<link rel="stylesheet" href="media/custom.css">
  
<link rel="shortcut icon" type="image/x-icon" href="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.ico">
  
  
  
<style>
div.imageinfo img {max-width: none;}
</style>

<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline;position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-.7em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>
<style id="respec-nlgov">
img.license{float:left;padding-right:5px}
</style>
<meta name="description" content="Deze handreiking biedt een uitgebreide verkenning van 3D tiling, een techniek
voor het efficiënt opslaan, serveren en visualiseren van driedimensionale
gegevens.">
<style>
.hljs{--base:#fafafa;--mono-1:#383a42;--mono-2:#686b77;--mono-3:#717277;--hue-1:#0b76c5;--hue-2:#336ae3;--hue-3:#a626a4;--hue-4:#42803c;--hue-5:#ca4706;--hue-5-2:#c91243;--hue-6:#986801;--hue-6-2:#9a6a01}
@media (prefers-color-scheme:dark){
.hljs{--base:#282c34;--mono-1:#abb2bf;--mono-2:#818896;--mono-3:#5c6370;--hue-1:#56b6c2;--hue-2:#61aeee;--hue-3:#c678dd;--hue-4:#98c379;--hue-5:#e06c75;--hue-5-2:#be5046;--hue-6:#d19a66;--hue-6-2:#e6c07b}
}
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;color:var(--mono-1,#383a42);background:#fafafa;background:var(--base,#fafafa)}
.hljs-comment,.hljs-quote{color:#717277;color:var(--mono-3,#717277);font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4;color:var(--hue-3,#a626a4)}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;color:var(--hue-5,#ca4706);font-weight:700}
.hljs-literal{color:#0b76c5;color:var(--hue-1,#0b76c5)}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c;color:var(--hue-4,#42803c)}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01;color:var(--hue-6-2,#9a6a01)}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801;color:var(--hue-6,#986801)}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3;color:var(--hue-2,#336ae3)}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>

  .sidelabel {
    position: fixed;
    -webkit-transform-origin: top right;
    right: 100%;
    top: 0;
    -webkit-transform: rotate(-90deg);
    padding: 4px 50px 4px 10px;
    color: white;
    white-space: nowrap;
    z-index: 1;
    background-color: #80CC28;
  }
</style>
<script type="text/javascript">
   /* Any custom mermaid.js scripts will go here. */
  </script>
<style>

  /* Any custom mermaid.js scripts will go here. */
  }
</style>
<script id="initialUserConfig" type="application/json">{
  "nl_organisationName": "Geonovum",
  "nl_organisationPublishURL": "https://docs.geostandaarden.nl/",
  "logos": [
    {
      "src": "https://tools.geostandaarden.nl/respec/style/logos/Geonovum.svg",
      "alt": "Geonovum",
      "id": "Geonovum",
      "height": 67,
      "width": 132,
      "url": "https://www.geonovum.nl/geo-standaarden"
    }
  ],
  "postProcess": [
    null
  ],
  "latestVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "shortName",
    "/"
  ],
  "thisVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "specStatus",
    "-",
    "specType",
    "-",
    "shortName",
    "-",
    "publishDate"
  ],
  "prevVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "previousMaturity",
    "-",
    "specType",
    "-",
    "shortName",
    "-",
    "previousPublishDate"
  ],
  "useLogo": true,
  "useLabel": true,
  "license": "cc-by",
  "addSectionLinks": true,
  "localizationStrings": {
    "en": {
      "wv": "Editor's draft",
      "cv": "Candidate recommendation",
      "vv": "Proposed recommendation",
      "def": "Recommendation",
      "ld": "Living document",
      "basis": "Document",
      "no": "Norm",
      "st": "Standard",
      "im": "Information model",
      "pr": "Practical guideline",
      "hr": "Guide",
      "wa": "Work process agreement",
      "al": "General",
      "bd": "Governance documentation",
      "bp": "Best practice"
    },
    "nl": {
      "wv": "Werkversie",
      "cv": "Consultatieversie",
      "vv": "Versie ter vaststelling",
      "def": "Vastgestelde versie",
      "ld": "Levend document",
      "basis": "Document",
      "no": "Norm",
      "st": "Standaard",
      "im": "Informatiemodel",
      "pr": "Praktijkrichtlijn",
      "hr": "Handreiking",
      "wa": "Werkafspraak",
      "al": "Algemeen",
      "bd": "Beheerdocumentatie",
      "bp": "Best practice"
    }
  },
  "sotdText": {
    "nl": {
      "sotd": "Status van dit document",
      "def": "Dit is de definitieve versie van dit document. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.",
      "wv": "Dit is een werkversie die op elk moment kan worden gewijzigd, verwijderd of vervangen door andere documenten. Het is geen stabiel document.",
      "cv": "Dit is een consultatieversie. Commentaar over dit document kan gestuurd worden naar ",
      "vv": "Dit is de definitieve conceptversie van dit document. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.",
      "basis": "Dit is een document zonder officiële status.",
      "ld": "Dit is een levend document dat regelmatig gewijzigd wordt."
    },
    "en": {
      "sotd": "Status of this document",
      "def": "This is the definitive version of this document. Edits resulting from consultations have been applied.",
      "wv": "This is a working draft that can be changed, removed or replaced by other documents at any time. It is not a stable document.",
      "cv": "This is a stable draft, published for public comment. Comments regarding this document may be sent to ",
      "vv": "This is the final draft of this document. Edits resulting from consultations have been applied.",
      "basis": "This document has no official standing.",
      "ld": "This is a living document, which is updated regularly."
    }
  },
  "labelColor": {
    "def": "#045D9F",
    "wv": "#FF0000",
    "cv": "#045D9F",
    "vv": "#045D9F",
    "basis": "#80CC28",
    "ld": "#80CC28"
  },
  "licenses": {
    "cc0": {
      "name": "Creative Commons 0 Public Domain Dedication",
      "short": "CC0",
      "url": "https://creativecommons.org/publicdomain/zero/1.0/",
      "image": "https://tools.geostandaarden.nl/respec/style/logos/CC-Licentie.svg"
    },
    "cc-by": {
      "name": "Creative Commons Attribution 4.0 International Public License",
      "short": "CC-BY",
      "url": "https://creativecommons.org/licenses/by/4.0/legalcode",
      "image": "https://tools.geostandaarden.nl/respec/style/logos/cc-by.svg"
    },
    "cc-by-nd": {
      "name": "Creative Commons Naamsvermelding-GeenAfgeleideWerken 4.0 Internationaal",
      "short": "CC-BY-ND",
      "url": "https://creativecommons.org/licenses/by-nd/4.0/legalcode.nl",
      "image": "https://tools.geostandaarden.nl/respec/style/logos/cc-by-nd.svg"
    }
  },
  "localBiblio": {
    "SemVer": {
      "href": "https://semver.org",
      "title": "Semantic Versioning 2.0.0",
      "authors": [
        "T. Preston-Werner"
      ],
      "date": "June 2013"
    }
  },
  "title": "Handreiking 3D Tiling",
  "specStatus": "ld",
  "specType": "HR",
  "pubDomain": "3d",
  "licence": "cc-by",
  "shortName": "3d-tiling",
  "publishDate": "2025-01-13",
  "editors": [
    {
      "name": "Arnoud de Boer",
      "company": "Geonovum"
    },
    {
      "name": "Michel Grothe",
      "company": "Geonovum"
    }
  ],
  "authors": [
    {
      "name": "André Mulder",
      "company": "Gemeente Rotterdam"
    },
    {
      "name": "Balazs Dukai",
      "company": "3DGI"
    },
    {
      "name": "Bert Temme",
      "company": "Geodan"
    },
    {
      "name": "Bob Mijwaard",
      "company": "Kadaster"
    },
    {
      "name": "Christian Wisse",
      "company": "Gemeente Rotterdam"
    },
    {
      "name": "Corné Helmons",
      "company": "Gemeente Rotterdam"
    },
    {
      "name": "Daan van de Heide",
      "company": "Rijkswaterstaat"
    },
    {
      "name": "Gerbrand Vestjens",
      "company": "Kadaster"
    },
    {
      "name": "Gerlof de Haan",
      "company": "VNG"
    },
    {
      "name": "Ioanna Tsakalaki",
      "company": "TNO"
    },
    {
      "name": "Jeroen Hogeboom",
      "company": "Kadaster"
    },
    {
      "name": "Linda Vels",
      "company": "Kadaster"
    },
    {
      "name": "Margriet Palm",
      "company": "Nelen-Schuurmans"
    },
    {
      "name": "Martijn van Gog",
      "company": "Gemeente Amsterdam"
    },
    {
      "name": "Ravi Peters",
      "company": "3DGI"
    },
    {
      "name": "Rinaldo Bhailal",
      "company": "Kadaster"
    }
  ],
  "github": "https://github.com/Geonovum/3d-tiling"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/base.css"></head>
  
<body class="h-entry informative"><div class="head">
    <a class="logo" href="https://www.geonovum.nl/geo-standaarden"><img alt="Geonovum" height="67" id="Geonovum" src="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.svg" width="132">
  </a> <h1 id="title" class="title">Handreiking 3D Tiling</h1>
    
    <h2>
      Geonovum Handreiking<br>
      Levend document
      <time class="dt-published" datetime="2025-01-13">13 januari 2025</time>
    </h2>
    <dl>
      <dt>Deze versie:</dt><dd class="status">
              <a class="u-url status" href="https://docs.geostandaarden.nl/3d/ld-hr-3d-tiling-20250113">https://docs.geostandaarden.nl/3d/ld-hr-3d-tiling-20250113</a>
            </dd>
      <dt>Laatst gepubliceerde versie:</dt><dd>
              <a href="https://docs.geostandaarden.nl/3d/3d-tiling/">https://docs.geostandaarden.nl/3d/3d-tiling/</a>
            </dd>
      <dt>Laatste werkversie:</dt><dd><a href="https://geonovum.github.io/3d-tiling/">https://geonovum.github.io/3d-tiling/</a></dd>
      
      
      
      
      
      <dt>Redacteurs:</dt>
      <dd class="editor p-author h-card vcard">
    <span class="p-name fn">Arnoud de Boer</span> (<span class="p-org org h-org">Geonovum</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Michel Grothe</span> (<span class="p-org org h-org">Geonovum</span>)
  </dd>
      
      <dt>Auteurs:</dt><dd class="editor p-author h-card vcard">
    <span class="p-name fn">André Mulder</span> (<span class="p-org org h-org">Gemeente Rotterdam</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Balazs Dukai</span> (<span class="p-org org h-org">3DGI</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Bert Temme</span> (<span class="p-org org h-org">Geodan</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Bob Mijwaard</span> (<span class="p-org org h-org">Kadaster</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Christian Wisse</span> (<span class="p-org org h-org">Gemeente Rotterdam</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Corné Helmons</span> (<span class="p-org org h-org">Gemeente Rotterdam</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Daan van de Heide</span> (<span class="p-org org h-org">Rijkswaterstaat</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Gerbrand Vestjens</span> (<span class="p-org org h-org">Kadaster</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Gerlof de Haan</span> (<span class="p-org org h-org">VNG</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Ioanna Tsakalaki</span> (<span class="p-org org h-org">TNO</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Jeroen Hogeboom</span> (<span class="p-org org h-org">Kadaster</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Linda Vels</span> (<span class="p-org org h-org">Kadaster</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Margriet Palm</span> (<span class="p-org org h-org">Nelen-Schuurmans</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Martijn van Gog</span> (<span class="p-org org h-org">Gemeente Amsterdam</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Ravi Peters</span> (<span class="p-org org h-org">3DGI</span>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Rinaldo Bhailal</span> (<span class="p-org org h-org">Kadaster</span>)
  </dd>
      <dt>Doe mee:</dt><dd>
    <a href="https://github.com/Geonovum/3d-tiling/">GitHub Geonovum/3d-tiling</a>
  </dd><dd>
    <a href="https://github.com/Geonovum/3d-tiling/issues/">Dien een melding in</a>
  </dd><dd>
    <a href="https://github.com/Geonovum/3d-tiling/commits/">Revisiehistorie</a>
  </dd><dd>
    <a href="https://github.com/Geonovum/3d-tiling/pulls/">Pull requests</a>
  </dd>
    </dl>
    
    
    
    <p class="copyright">
          Dit document valt onder de volgende licentie: 
          <a rel="license" href="https://creativecommons.org/licenses/by/4.0/legalcode" class="subfoot"><img class="license" src="https://tools.geostandaarden.nl/respec/style/logos/cc-by.svg" alt="Logo Creative Commons Attribution 4.0 International Public License"><br> Creative Commons Attribution 4.0 International Public License</a>
        </p>
    <hr title="Separator for header">
  </div>
  <section id="abstract" class="introductory"><h2>Samenvatting</h2><p>Deze handreiking biedt een uitgebreide verkenning van 3D tiling, een techniek
voor het efficiënt opslaan, serveren en visualiseren van driedimensionale
gegevens.</p>
<p>De handreiking begint met een algemene introductie tot 3D tiling, waarbij de
voordelen en toepassingsgebieden worden belicht. Praktijkvoorbeelden illustreren
de veelzijdigheid van 3D tiling in diverse domeinen, van GIS tot digitale
tweelingen.</p>
<p>Vervolgens worden de belangrijkste standaarden voor 3D tiling behandeld. De
techniek van 3D tiling wordt gedetailleerd beschreven, waaronder formaten zoals
het 3D Tiles-schema en tegelformaten.</p>
<p>Best practices worden gedeeld voor zowel klanten (consumers), data-aanbieders
(providers) als ontwikkelaars (developers), met aandacht voor optimalisatie van
prestaties en gebruiksgemak. Hierbij worden enkele aspecten voor het genereren,
serveren en gebruiken van 3D tiles uitgelicht.</p>
<p>Ten slotte bevat de handreiking een uitgebreide toolkit met referenties naar
handleidingen, clients, servers en 3D Tile datasets, waardoor lezers worden
voorzien van de nodige bronnen om aan de slag te gaan met 3D tiling in hun
projecten.</p>
</section>
  <section id="sotd" class="introductory"><h2>Status van dit document</h2><p>Dit is een levend document dat regelmatig gewijzigd wordt.</p></section><nav id="toc"><h2 class="introductory" id="inhoudsopgave">Inhoudsopgave</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Samenvatting</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status van dit document</a></li><li class="tocline"><a class="tocxref" href="#inleiding"><bdi class="secno">1. </bdi>Inleiding</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#aanleiding"><bdi class="secno">1.1 </bdi>Aanleiding</a></li><li class="tocline"><a class="tocxref" href="#wat-is-3d-tiling"><bdi class="secno">1.2 </bdi>Wat is 3D Tiling?</a></li><li class="tocline"><a class="tocxref" href="#waar-is-3d-tiling-voor-te-gebruiken"><bdi class="secno">1.3 </bdi>Waar is 3D Tiling voor te gebruiken?</a></li><li class="tocline"><a class="tocxref" href="#wat-zijn-de-voor-en-nadelen-van-3d-tiling"><bdi class="secno">1.4 </bdi>Wat zijn de voor- en nadelen van 3D Tiling?</a></li><li class="tocline"><a class="tocxref" href="#welke-standaarden-zijn-er-voor-3d-tiling"><bdi class="secno">1.5 </bdi>Welke standaarden zijn er voor 3D tiling?</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#ogc-3d-tiles-specification"><bdi class="secno">1.5.1 </bdi>OGC 3D Tiles specification</a></li><li class="tocline"><a class="tocxref" href="#i3s"><bdi class="secno">1.5.2 </bdi>i3S</a></li></ol></li><li class="tocline"><a class="tocxref" href="#praktijkvoorbeelden"><bdi class="secno">1.6 </bdi>Praktijkvoorbeelden</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#bro-circulaire-grondstromen"><bdi class="secno">1.6.1 </bdi>BRO circulaire grondstromen</a></li><li class="tocline"><a class="tocxref" href="#x3d-rotterdam"><bdi class="secno">1.6.2 </bdi>3D Rotterdam</a></li><li class="tocline"><a class="tocxref" href="#wateroverlast-door-extreme-buien"><bdi class="secno">1.6.3 </bdi>Wateroverlast door extreme buien</a></li><li class="tocline"><a class="tocxref" href="#visualisatie-doorrijprofielen"><bdi class="secno">1.6.4 </bdi>Visualisatie doorrijprofielen</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#standaard-ogc-3d-tiles"><bdi class="secno">2. </bdi>Standaard OGC 3D Tiles</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#introductie"><bdi class="secno">2.1 </bdi>Introductie</a></li><li class="tocline"><a class="tocxref" href="#tegelset"><bdi class="secno">2.2 </bdi>Tegelset</a></li><li class="tocline"><a class="tocxref" href="#tegelformaten"><bdi class="secno">2.3 </bdi>Tegelformaten</a></li><li class="tocline"><a class="tocxref" href="#mediatypes-en-encoding"><bdi class="secno">2.4 </bdi>Mediatypes en encoding</a></li><li class="tocline"><a class="tocxref" href="#geometric-error"><bdi class="secno">2.5 </bdi>Geometric error</a></li><li class="tocline"><a class="tocxref" href="#implicit-tiling"><bdi class="secno">2.6 </bdi>Implicit tiling</a></li><li class="tocline"><a class="tocxref" href="#metadata"><bdi class="secno">2.7 </bdi>Metadata</a></li></ol></li><li class="tocline"><a class="tocxref" href="#best-practices"><bdi class="secno">3. </bdi>Best practices</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#genereren-van-3d-tiles"><bdi class="secno">3.1 </bdi>Genereren van 3D Tiles</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#attribuutgegevens"><bdi class="secno">3.1.1 </bdi>Attribuutgegevens</a></li><li class="tocline"><a class="tocxref" href="#explicit-en-implicit-tiling"><bdi class="secno">3.1.2 </bdi>Explicit en implicit tiling</a></li><li class="tocline"><a class="tocxref" href="#geometric-error-0"><bdi class="secno">3.1.3 </bdi>Geometric error</a></li><li class="tocline"><a class="tocxref" href="#offset-z-coordinaat"><bdi class="secno">3.1.4 </bdi>Offset Z-coördinaat</a></li><li class="tocline"><a class="tocxref" href="#optimale-set-aan-parameters"><bdi class="secno">3.1.5 </bdi>Optimale set aan parameters</a></li><li class="tocline"><a class="tocxref" href="#shader"><bdi class="secno">3.1.6 </bdi>Shader</a></li><li class="tocline"><a class="tocxref" href="#formaat"><bdi class="secno">3.1.7 </bdi>Formaat</a></li><li class="tocline"><a class="tocxref" href="#compressie"><bdi class="secno">3.1.8 </bdi>Compressie</a></li></ol></li><li class="tocline"><a class="tocxref" href="#valideren-van-3d-tiles"><bdi class="secno">3.2 </bdi>Valideren van 3D tiles</a></li><li class="tocline"><a class="tocxref" href="#publiceren-van-3d-tiles"><bdi class="secno">3.3 </bdi>Publiceren van 3D Tiles</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#ogc-api-geovolumes"><bdi class="secno">3.3.1 </bdi>OGC API GeoVolumes</a></li><li class="tocline"><a class="tocxref" href="#metadata-0"><bdi class="secno">3.3.2 </bdi>Metadata</a></li></ol></li><li class="tocline"><a class="tocxref" href="#gebruiken-van-3d-tiles"><bdi class="secno">3.4 </bdi>Gebruiken van 3D Tiles</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#minimal-zoom"><bdi class="secno">3.4.1 </bdi>Minimal zoom</a></li><li class="tocline"><a class="tocxref" href="#kleur-en-belichting"><bdi class="secno">3.4.2 </bdi>Kleur en belichting</a></li><li class="tocline"><a class="tocxref" href="#wcag"><bdi class="secno">3.4.3 </bdi>WCAG</a></li><li class="tocline"><a class="tocxref" href="#coordinaten-van-scherm-terrein-en-camera-doelobject"><bdi class="secno">3.4.4 </bdi>Coördinaten van scherm/terrein en camera/doelobject</a></li><li class="tocline"><a class="tocxref" href="#diepte-vlak-depth-plane"><bdi class="secno">3.4.5 </bdi>Diepte vlak (depth plane)</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#toolkit"><bdi class="secno">4. </bdi>Toolkit</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#handleidingen"><bdi class="secno">4.1 </bdi>Handleidingen</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#howto-quickstartguide-3d-tiles"><bdi class="secno">4.1.1 </bdi>HowTo: QuickStartGuide 3D Tiles</a></li><li class="tocline"><a class="tocxref" href="#howto-3d-tiles-in-mapbox"><bdi class="secno">4.1.2 </bdi>HowTo: 3D Tiles in Mapbox</a></li><li class="tocline"><a class="tocxref" href="#howto-genereren-van-3d-tiles-met-virtual-city-systems"><bdi class="secno">4.1.3 </bdi>HowTo: Genereren van 3D tiles met Virtual City Systems</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#levels"><bdi class="secno">4.1.3.1 </bdi>Levels</a></li><li class="tocline"><a class="tocxref" href="#citygml-level-of-detail"><bdi class="secno">4.1.3.2 </bdi>CityGML Level of Detail</a></li><li class="tocline"><a class="tocxref" href="#object-size-filter"><bdi class="secno">4.1.3.3 </bdi>Object size filter</a></li><li class="tocline"><a class="tocxref" href="#geometry-generalization"><bdi class="secno">4.1.3.4 </bdi>Geometry generalization</a></li><li class="tocline"><a class="tocxref" href="#textures"><bdi class="secno">4.1.3.5 </bdi>Textures</a></li><li class="tocline"><a class="tocxref" href="#refinement-0"><bdi class="secno">4.1.3.6 </bdi>Refinement</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#viewers-generators-en-servers"><bdi class="secno">4.2 </bdi>Viewers, generators en servers</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#viewers"><bdi class="secno">4.2.1 </bdi>Viewers</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#cesium"><bdi class="secno">4.2.1.1 </bdi>Cesium</a></li><li class="tocline"><a class="tocxref" href="#unity"><bdi class="secno">4.2.1.2 </bdi>Unity</a></li><li class="tocline"><a class="tocxref" href="#unreal-engine"><bdi class="secno">4.2.1.3 </bdi>Unreal Engine</a></li><li class="tocline"><a class="tocxref" href="#deck-gl"><bdi class="secno">4.2.1.4 </bdi>deck.gl</a></li><li class="tocline"><a class="tocxref" href="#esri-javascript-sdk-arcgis-server"><bdi class="secno">4.2.1.5 </bdi>Esri JavaScript SDK / ArcGIS Server</a></li><li class="tocline"><a class="tocxref" href="#qgis"><bdi class="secno">4.2.1.6 </bdi>QGIS</a></li><li class="tocline"><a class="tocxref" href="#x3d-tiles-renderer"><bdi class="secno">4.2.1.7 </bdi>3d-tiles-renderer</a></li></ol></li><li class="tocline"><a class="tocxref" href="#generators-en-servers"><bdi class="secno">4.2.2 </bdi>Generators en servers</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#tyler"><bdi class="secno">4.2.2.1 </bdi>Tyler</a></li><li class="tocline"><a class="tocxref" href="#pg2b3dm"><bdi class="secno">4.2.2.2 </bdi>pg2b3dm</a></li><li class="tocline"><a class="tocxref" href="#i3dm-export"><bdi class="secno">4.2.2.3 </bdi>I3dm.export</a></li><li class="tocline"><a class="tocxref" href="#vcs"><bdi class="secno">4.2.2.4 </bdi>VCS</a></li><li class="tocline"><a class="tocxref" href="#x3d-geovolumes"><bdi class="secno">4.2.2.5 </bdi>3D GeoVolumes</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#x3d-tile-datasets-en-websites"><bdi class="secno">4.3 </bdi>3D Tile Datasets en websites</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#x3d-basisvoorziening-kadaster"><bdi class="secno">4.3.1 </bdi>3D basisvoorziening Kadaster</a></li><li class="tocline"><a class="tocxref" href="#x3d-tiles-nederland"><bdi class="secno">4.3.2 </bdi>3D Tiles Nederland</a></li><li class="tocline"><a class="tocxref" href="#netherlands3d"><bdi class="secno">4.3.3 </bdi>Netherlands3D</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#tof"><bdi class="secno">A. </bdi>Lijst met figuren</a></li></ol></nav>
  
  <section id="inleiding"><div class="header-wrapper"><h2 id="x1-inleiding"><bdi class="secno">1. </bdi>Inleiding</h2><a class="self-link" href="#inleiding" aria-label="Permalink for Section 1."></a></div>
<section id="aanleiding"><div class="header-wrapper"><h3 id="x1-1-aanleiding"><bdi class="secno">1.1 </bdi>Aanleiding</h3><a class="self-link" href="#aanleiding" aria-label="Permalink for Section 1.1"></a></div>
<p>De handreiking 3D Tiles heeft tot doel bij te dragen aan het breder gebruik van
3D data in Nederland met de adoptie van 3D Tiles in het bijzonder. Door best
practises (praktische richtlijnen) te bieden voor de implementatie van 3D Tiles,
kunnen verschillende systemen en softwareoplossingen (tools) beter met elkaar
samenwerken, wat cruciaal is voor de uitwisseling van de visualisaties van 3D
data in GIS applicaties en digital twins. Via de best practises biedt de
handreiking mogelijkheden voor bredere acceptatie en verspreiding van 3D Tiles
binnen de Nederlandse gebruiksgemeenschap en vele verschillende belanghebbende
organisaties.</p>
<p>Deze handreiking is tot stand gekomen door de inbreng van expertise en
ervaringen van diverse experts en ‘early adopters’ van 3D Tiles in Nederland. De
kennis en ervaringen zijn vanuit diverse publieke en private organisaties is
bijeengebracht in diverse best practises voor 3D Tiles. Door het stimuleren van
best practices en het delen van deze kennis kan de handreiking innovatie
bevorderen en nieuwe toepassingen en gebruiksscenario’s inspireren. De
handreiking 3D Tiles draagt daarmee bij aan het bevorderen van een beter begrip,
bredere adoptie en effectievere toepassing van 3D Tiles en de bijhorende
technologieën en tools. En met enkele voorbeeldtoepassingen wordt in dit
hoofdstuk de waarde van 3D data en 3D Tiles geïllustreerd.</p>
</section><section id="wat-is-3d-tiling"><div class="header-wrapper"><h3 id="x1-2-wat-is-3d-tiling"><bdi class="secno">1.2 </bdi>Wat is 3D Tiling?</h3><a class="self-link" href="#wat-is-3d-tiling" aria-label="Permalink for Section 1.2"></a></div>
<p>Simpel gezegd: 3D Tiling is een techniek waarbij tegels met drie-dimensionale
data worden geserveerd van een server naar een client.</p>
<p>In computer graphics en 3D visualisatie is 3D Tiling een techniek die wordt
gebruikt om grote volumes ruimtelijke data efficiënt aan te bieden via het web.
Net als bij 2D Vector Tiles, waarbij een tweedimensionaal oppervlak wordt
verdeeld in kleinere tegels voor eenvoudigere verwerking, breidt 3D Tiling dit
concept uit naar drie dimensies, waardoor het streamen van complexe 3D-datasets
mogelijk wordt.</p>
</section><section id="waar-is-3d-tiling-voor-te-gebruiken"><div class="header-wrapper"><h3 id="x1-3-waar-is-3d-tiling-voor-te-gebruiken"><bdi class="secno">1.3 </bdi>Waar is 3D Tiling voor te gebruiken?</h3><a class="self-link" href="#waar-is-3d-tiling-voor-te-gebruiken" aria-label="Permalink for Section 1.3"></a></div>
<p>De toepassingen van 3D tiling bestrijken tal van domeinen, waaronder 3D
visualisaties voor stadsplanning, architectuur, gaming, virtual reality en
simulatie. Bijvoorbeeld, in georuimtelijke mapping maakt 3D tiling de
visualisatie mogelijk van gedetailleerde terreinmodellen, gebouwen en
infrastructuur in realtime of bijna-realtime omgevingen. In gaming en virtual
reality vergemakkelijkt het het renderen van meeslepende 3D-omgevingen met een
hoog niveau van detail en interactiviteit.</p>
</section><section id="wat-zijn-de-voor-en-nadelen-van-3d-tiling"><div class="header-wrapper"><h3 id="x1-4-wat-zijn-de-voor-en-nadelen-van-3d-tiling"><bdi class="secno">1.4 </bdi>Wat zijn de voor- en nadelen van 3D Tiling?</h3><a class="self-link" href="#wat-zijn-de-voor-en-nadelen-van-3d-tiling" aria-label="Permalink for Section 1.4"></a></div>
<p>3D tiling biedt aanzienlijke voordelen voor het beheren en visualiseren van
grote en complexe datasets. Door gegevens op te delen in kleinere, beheersbare
tegels, kunnen deze efficiënter gestreamd en gerenderd worden. Dit zorgt voor
betere prestaties en een responsievere weergave van de data. Standaarden zoals
3D Tiles en de OGC 3D Tiles API bevorderen de interoperabiliteit tussen
verschillende softwareplatforms, wat naadloze integratie en uitwisseling van
3D-gegevens mogelijk maakt. Bovendien zijn 3D tiling technieken flexibel
aanpasbaar aan verschillende toepassingen en omgevingen, wat ontwikkelaars en
gebruikers veel ruimte geeft voor maatwerk.</p>
<p>Er zijn echter ook enkele nadelen verbonden aan 3D tiling. Het implementeren van
deze oplossingen vraagt om specialistische kennis op het gebied van ruimtelijk
gegevensbeheer, rendering-algoritmen en optimalisatietechnieken, wat de
complexiteit van ontwikkelingsprojecten kan verhogen. Daarnaast kan het opslaan
van getilede datasets meer opslagruimte vereisen dan ruwe gegevensformaten,
vooral als er verschillende niveaus van detail worden gebruikt. Het tiling
proces zelf kan ook extra verwerkingskracht vereisen, wat vooral merkbaar is bij
dynamische of streamende datasets. Ten slotte kan het waarborgen van
compatibiliteit en naleving van 3D tiling standaarden over verschillende
softwareplatforms en ecosystemen uitdagingen met zich meebrengen.</p>
<p>Samengevat biedt 3D tiling grote voordelen voor het efficiënt beheren en
visualiseren van 3D gegevens, maar het brengt ook uitdagingen met zich mee op
het gebied van complexiteit, opslag, verwerking en standaardisatie. Door deze
uitdagingen aan te pakken en gebruik te maken van gestandaardiseerde
specificaties zoals 3D Tiles en de OGC 3D Tiles API, kunnen ontwikkelaars de
voordelen van 3D tiling benutten om de efficiëntie en effectiviteit van hun
toepassingen en workflows te verbeteren.</p>
</section><section id="welke-standaarden-zijn-er-voor-3d-tiling"><div class="header-wrapper"><h3 id="x1-5-welke-standaarden-zijn-er-voor-3d-tiling"><bdi class="secno">1.5 </bdi>Welke standaarden zijn er voor 3D tiling?</h3><a class="self-link" href="#welke-standaarden-zijn-er-voor-3d-tiling" aria-label="Permalink for Section 1.5"></a></div>
<p>Voor het serveren van 3D Tiles zijn er in het algemeen twee standaarden.</p>
<section id="ogc-3d-tiles-specification"><div class="header-wrapper"><h4 id="x1-5-1-ogc-3d-tiles-specification"><bdi class="secno">1.5.1 </bdi>OGC 3D Tiles specification</h4><a class="self-link" href="#ogc-3d-tiles-specification" aria-label="Permalink for Section 1.5.1"></a></div>
<p><a href="https://docs.ogc.org/cs/22-025r4/22-025r4.html">OGC 3D Tiles</a> is een OGC community standaard
voor het efficiënt streamen en renderen van grote driedimensionale
ruimtelijke datasets, waaronder 3D objecten, fotogrammetrie, BIM/CAD-modellen en puntenwolken.
Het definieert een gegevensstructuur en tegelformaten voor renderbare inhoud
zonder strikte visualisatieregels.</p>
<p>3D Tiles is ontwikkeld door Cesium en wordt beheerd door het Open Geospatial Consortium (OGC).  </p>
<p>Een 3D Tiles-dataset (tileset) bevat diverse tegelformaten georganiseerd in een
ruimtelijke structuur. Het is declaratief, uitbreidbaar en geschikt voor
verschillende soorten 3D-gegevens. De tegelformaten omvatten batched
3D-modellen, geïnstantieerde 3D-modellen, puntenwolken en samengestelde tegels.</p>
<p>De specificatie omvat ook 3D Tile Styles voor declaratieve styling van
tegelsets. Het is een open formaat dat niet gebonden is aan specifieke
leveranciers of technologieën.</p>
</section><section id="i3s"><div class="header-wrapper"><h4 id="x1-5-2-i3s"><bdi class="secno">1.5.2 </bdi>i3S</h4><a class="self-link" href="#i3s" aria-label="Permalink for Section 1.5.2"></a></div>
<p><a href="https://www.ogc.org/standard/i3s/">I3S</a> staat voor Indexed 3D Scene Layer en is
een open standaard die is ontwikkeld door Esri voor het efficiënt opslaan, delen
en weergeven van grote en complexe driedimensionale georuimtelijke gegevens. Het
is tevens net als 3D Tiles een community standaard van het Open Geospatial Consortium (OGC) en wordt
vaak gebruikt binnen de GIS-gemeenschap.</p>
<p>I3S is geoptimaliseerd voor het werken met gegevens in de context van
web-gebaseerde toepassingen, waardoor het mogelijk is om grote 3D-scènes in
real-time te streamen en te visualiseren in webbrowsers of andere applicaties.
Het maakt gebruik van een combinatie van ruimtelijke indexering, tiling en
compressie om de prestaties te optimaliseren en de benodigde bandbreedte te
minimaliseren bij het overbrengen van 3D-gegevens over het web.</p>
<p>De I3S-specificatie omvat verschillende componenten, zoals de Scene Layer, de
Scene Layer Package en de Scene Layer Service, die samenwerken om 3D-gegevens
efficiënt te organiseren en weer te geven. Het wordt vaak gebruikt in combinatie
met Esri's ArcGIS-platform, maar is een open standaard die door andere
softwareleveranciers kan worden geïmplementeerd en gebruikt.</p>
<div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="5"><span>Noot</span><span class="issue-label">: Scope afbakening OGC 3D Tiles</span></div><aside class="">
    In deze handreiking richten we ons voornamelijk op de standaard OGC 3D Tiles. De keuze voor OGC 3D Tiles is gemaakt vanwege de brede ondersteuning en interoperabiliteit die deze standaard biedt binnen verschillende softwareplatforms en ecosystemen. Hoewel andere formaten zoals i3S ook waardevolle toepassingen hebben, biedt OGC 3D Tiles momenteel een meer universele benadering voor het beheren en visualiseren van 3D-ruimtelijke gegevens.
</aside></div>


</section></section><section id="praktijkvoorbeelden"><div class="header-wrapper"><h3 id="x1-6-praktijkvoorbeelden"><bdi class="secno">1.6 </bdi>Praktijkvoorbeelden</h3><a class="self-link" href="#praktijkvoorbeelden" aria-label="Permalink for Section 1.6"></a></div>
<p>De toepassing van 3D Tiles vinden we al terug in verschillende applicaties en 3D
digital twins. Ter illustratie zijn hieronder zijn voorbeelden opgenomen van
enkele Nederlandse toepassingen die 3D Tiles voor de 3D visualisatie gebruiken.</p>
<section id="bro-circulaire-grondstromen"><div class="header-wrapper"><h4 id="x1-6-1-bro-circulaire-grondstromen"><bdi class="secno">1.6.1 </bdi>BRO circulaire grondstromen</h4><a class="self-link" href="#bro-circulaire-grondstromen" aria-label="Permalink for Section 1.6.1"></a></div>
<p>3D Tiles worden gebruikt in de toepassing Circulaire Grondstromen (BRO
praktijkvoorbeeld) om complexe en gedetailleerde 3D informatie over grond- en
bouwmaterialen efficiënt te visualiseren en te beheren. Dit helpt bij het
monitoren, plannen en optimaliseren van het hergebruik van materialen binnen een
circulaire economie. Door 3D Tiles in te zetten, kunnen verschillende
stakeholders eenvoudig toegang krijgen tot actuele en nauwkeurige data, wat
bijdraagt aan een beter begrip van materiaalstromen en bevordert de samenwerking
tussen partijen (zie figuur 1). </p>
<figure id="bro01">
<a href="media/geodan_image2.png" target="_blank"><img src="media/geodan_image2.png" alt=""></a>
<figcaption><a class="self-link" href="#bro01">Figuur <bdi class="figno">1</bdi></a> <span class="fig-title">3D Tiles weergave bij BRO praktijkvoorbeeld Circulaire Grondstromen (bron: Geodan)</span></figcaption>
</figure>

<p>In de toepassing Circulaire Grondstromen gemaakt met CesiumJS
zorgt 3D Tiles ervoor dat de prestaties van de webviewer worden gemaximaliseerd.
Het proces van het converteren van data naar 3D-tegels binnen de toepassing
Circulaire Grondstromen varieert afhankelijk van de databron (zie figuur 2); de
3D tegels worden toegepast voor diverse typen data, zoals het DTB, puntenwolken,
basisregistraties en BRO modellen en orthofoto’s.</p>
<figure id="bro02">
<a href="media/geodan_image1.png" target="_blank"><img src="media/geodan_image1.png" alt=""></a>
<figcaption><a class="self-link" href="#bro02">Figuur <bdi class="figno">2</bdi></a> <span class="fig-title">3D Tiles gebruik bij BRO praktijkvoorbeeld Circulaire Grondstromen (bron: Geodan)</span></figcaption>
</figure>

<p>Bronnen: <a href="https://basisregistratieondergrond.nl/doe-mee/begin-dag-bro-tje/bro-tjes-2024/11-januari-2024/datagedreven-duurzamer-her-gebruik-grond/">BRO praktijkvoorbeeld circulaire
grondstromen</a>,
<a href="https://grondstromen.beta.geodan.nl/?story=circulaire%20grondstromen">Storymap over circulaire
grondstromen</a>.</p>
</section><section id="x3d-rotterdam"><div class="header-wrapper"><h4 id="x1-6-2-3d-rotterdam"><bdi class="secno">1.6.2 </bdi>3D Rotterdam</h4><a class="self-link" href="#x3d-rotterdam" aria-label="Permalink for Section 1.6.2"></a></div>
<p>De gemeente Rotterdam stelt het 3D-stadsmodel van Rotterdam vrij ter beschikking aan iedereen die daarmee aan de slag wil gaan. De gemeente wil hiermee het gebruik en toepassingen van deze unieke dataset stimuleren bij scholen en universiteiten, overheids- en Rotterdamse diensten, gamers, het bedrijfsleven uit binnen- en buitenland maar ook bewoners. Zij kunnen met de juiste tools Rotterdam op een manier in beeld brengen die op een platte kaart onmogelijk is. Rotterdam 3D is een driedimensionale (3D) weergave van de gemeente gebaseerd op tweedimensionale (2D) kaarten, hoogtemetingen, luchtfoto’s en beheergegevens. Rotterdam 3D (zie figuur ?) maakt gebruik van 3D Tiles en bestaat niet alleen uit gebouwen. Ook bomen, lantaarnpalen en kabels en leidingen zijn inmiddels in 3D en via 3D Tiles beschikbaar. Tilesets van Rotterdam 3D zijn ook te downloaden via <a href="https://3dtilesnederland.nl">link</a>. Het toegankelijk maken van Rotterdam 3D biedt Rotterdammers de mogelijkheid mee te bouwen aan de stad. De gegevens zijn daarom compleet, actueel en gratis voor hergebruik.</p>
<p>In de onderstaande figuren zijn enkele voorbeelden opgenomen van het 3D Tiles in Rotterdam 3D. In figuur 3 zijn de getextureerde gebouwen tezamen met de getextureerde bomen op een luchtfoto afgebeeld. Hierdoor creëer je al snel een ‘realistisch’ digitaal beeld van de stad.</p>
<figure id="rdam01"> 
<a href="media/rotterdam_image1.png" target="_blank"><img src="media/rotterdam_image1.png" alt=""></a>
<figcaption><a class="self-link" href="#rdam01">Figuur <bdi class="figno">3</bdi></a> <span class="fig-title">3D Tiles visualisatie van getextureerde gebouwen en bomen in Rotterdam 3D</span></figcaption>
</figure>

<p>Benieuwd of er nog een plaatsje vrij is onder de straat voor een ondergrondse vuilcontainer? 3D Rotterdam biedt de mogelijkheden voor een kijkje in de ondergrond (figuur 4).</p>
<figure id="rdam02"> 
<a href="media/rotterdam_image2.png" target="_blank"><img src="media/rotterdam_image2.png" alt=""></a>
<figcaption><a class="self-link" href="#rdam02">Figuur <bdi class="figno">4</bdi></a> <span class="fig-title">Een 3D Tiles kijkje in de Rotterdamse ondergrond</span></figcaption>
</figure>

<p>Met behulp van een 3D viewer, die alleen beschikbaar is voor de medewerkers van de gemeente Rotterdam, zorgt 3D Tiles ervoor dat de medewerkers snel en intuïtief gegevens kunnen ophalen van assets in de stad. Dit behelst niet alleen gebouwen maar ook straatmeubilair, groenvoorziening, etc.. Vanuit het gemeentelijk datafundament, waarin onder andere de BAG, de BGT, de WOZ, de TIR en de BOR zijn opgenomen, kunnen data analyses in samenhang worden uitgevoerd en vragen worden beantwoord, zoals hoeveel hoekwoningen een wijk heeft (figuur 5) of welke panden bevatten specifieke materialen in het dak? Ook het vergelijken van panden en hun attributen uit verschillende registraties WOZ en BAG: Welke object pas niet in het rijtje? (figuur 5). </p>
<figure id="rdam03"> 
<a href="media/rotterdam_image3.png" target="_blank"><img src="media/rotterdam_image3.png" alt=""></a>
<figcaption><a class="self-link" href="#rdam03">Figuur <bdi class="figno">5</bdi></a> <span class="fig-title">Alle hoekwoningen in de wijk Ommoord</span></figcaption>
</figure>

<p>De 3D tilesets bevatten ook panden als geheel en kunnen de verblijfsobjecten in de toekomst ook identificeren en informatie over de verblijfsobjecten opvraagbaar maken (zie figuur 6).</p>
<figure id="rdam04"> 
<a href="media/rotterdam_image4.png" target="_blank"><img src="media/rotterdam_image4.png" alt=""></a>
<figcaption><a class="self-link" href="#rdam04">Figuur <bdi class="figno">6</bdi></a> <span class="fig-title">3D Tiles ingezet voor het vergelijken van pandattributen uit WOZ en BAG</span></figcaption>
</figure>

<p>Bronnen: <a href="http://www.3drotterdam.nl">www.3drotterdam.nl</a></p>
</section><section id="wateroverlast-door-extreme-buien"><div class="header-wrapper"><h4 id="x1-6-3-wateroverlast-door-extreme-buien"><bdi class="secno">1.6.3 </bdi>Wateroverlast door extreme buien</h4><a class="self-link" href="#wateroverlast-door-extreme-buien" aria-label="Permalink for Section 1.6.3"></a></div>
<p>De hydrodynamische modelleringssoftware 3Di wordt, onder andere, gebruikt voor het voorspellen van wateroverlast. De software kan de effecten van hevige neerslag, en of een dijkdoorbraak in kaart brengen. . De rekenmodellen zijn opgebouwd uit gedetailleerde 2D informatie, zoals de hoogte van het maaiveld. Maar kunnen ook uitgebreid worden met 1D om bijvoorbeeld in de stad de riolering op een goede manier mee te nemen. Deze combinatie levert een hoge nauwkeurigheid en vergroot de toepasbaarheid.</p>
<p>Met behulp van 3D Tiles kan wateroverlast gevisualiseerd in een realistische 3D omgeving waardoor ook niet-water-experts deze resultaten gemakkelijk kunnen interpreteren (zie figuur 7). Denk hierbij aan bv besluitvormers die ten tijde van een calamiteit onder grote druk keuzes moeten maken. Beleidsmakers die door de steeds meer integrale aanpak met meerdere domeinen te maken krijgen. Maar ook aan burgers die geïnformeerd worden over beleid en waarbij de 3D omgeving ook kan ondersteunen in het vegroten van klimaatbewustzijn.</p>
<figure id="waterhoogtes"> 
<a href="media/3Di_image1.png" target="_blank"><img src="media/3Di_image1.png" alt=""></a>
<figcaption><a class="self-link" href="#waterhoogtes">Figuur <bdi class="figno">7</bdi></a> <span class="fig-title">3D Tiles ingezet voor het weergegeven van waterhoogtes (bron: Imagem)</span></figcaption>
</figure>

<p>Om deze 3D Tiles te kunnen gebruiken moeten de waterhoogte die 3Di voorspelt omgezet worden in ruimtelijke objecten die gerepresenteerd kunnen worden als 3D Tiles. De waterhoogte die 3Di voorspelt beschrijft de waterhoogte in een vierkant gebiedje. Door middel van interpolatie en triangulatie wordt dit omgezet in een 3D mesh en deze mesh wordt dan gerepresenteerd als 3D Tiles. Deze stappen kunnen worden uitgevoerd tijdens of na de simulatie voor iedere tijdsstap die gesimuleerd wordt.</p>
<p>Wanneer deze 3D Tiles zijn gegenereerd worden deze weergegeven in de 3D representatie van de omgeving. Er is gekozen om zo min mogelijk styling informatie aan de 3D Tiles toe te voegen; dit wordt overgelaten aan de visualisatiesoftware. Door hierin dezelfde hoogtekaart te gebruiken als in de simulatie zal alleen water dat boven het maaiveld uitkomt zichtbaar zijn. De resultaten van meerdere tijdstappen zijn beschikbaar waardoor het verloop van de wateroverlast over de tijd gevisualiseerd kan worden. Dit geeft inzicht in de duur van de overlast en de snelheid waarmee de overlast verdwijnt.</p>
<p>Bronnen: <a href="https://3diwatermanagement.com/">3Di watermanagement</a></p>
</section><section id="visualisatie-doorrijprofielen"><div class="header-wrapper"><h4 id="x1-6-4-visualisatie-doorrijprofielen"><bdi class="secno">1.6.4 </bdi>Visualisatie doorrijprofielen</h4><a class="self-link" href="#visualisatie-doorrijprofielen" aria-label="Permalink for Section 1.6.4"></a></div>
<p>Voor het bepalen van de status van de verschillende assets van Rijkswaterstaat,
worden planimetrische en hoogte-informatie gecombineerd (3D) toegepast. Een
voorbeeld hiervan is het schouwen, inwinnen en valideren van de vrije ruimtes
tussen het wegdek en een asset binnen het brongebied van RWS. Dit doet RWS in
opdracht van de RDW, en zorgt ervoor dat er een veilige doorgang gegarandeerd is
voor persoon, vracht en speciaal vervoer. RWS voert zelf geen data inwinning
uit, en is daarom afhankelijk van de data die geleverd wordt vanuit de
leveranciers.</p>
<p>Hiervoor zijn er eisen gesteld aan de vrije ruimtes, waarbij voor de
hoogtemetingen een relatieve afwijking van 1 cm is vastgesteld (zie ook bronen onder). 
Omdat deze metingen vaak op snelwegen worden uitgevoerd, kiezen leveranciers
steeds vaker voor het inwinnen van de vrije ruimte met behulp van mobile
laserscanning. Mede doordat dit een efficiënte en veilige methode van inwinning
is. De meting resulteert in een puntenwolk dataset van een asset, waarna de
vrije ruimtes vervolgens worden geconverteerd naar fotobestanden voor een
weergave van de omgeving.</p>
<p>Voor het valideren van de fotobestanden van de leverancier wordt gebruikgemaakt
van 3D-software die ontwikkeld is door de TU Delft en Rijkswaterstaat (zie bronnen onder).
Deze software wordt ingezet om met alternatieve puntenwolken
vergelijkingsmateriaal van hetzelfde asset te maken. Dit stelt Rijkswaterstaat
in staat om het geleverde fotomateriaal te controleren en te verifiëren of de
omschrijvingen in de bewijsvoering (kwaliteitsrapportage) overeenkomen.</p>
<p>De software is gebaseerd op het feit dat het wegdek en het brugdek/portaal
voldoende gesegmenteerd kan worden uit de data, en dat doormiddel van B-splines
een schatting gemaakt kan worden van de onderkant van het object. De resultaten
kunnen op twee manieren worden weergegeven: via de dwarsdoorsnede (figuur 8A) of
doormiddel van de voxels van het gehele wegdek (figuur 8B).</p>
<figure id="wegdek"> 
<a href="media/726ce491e4eb25da71ea0c1ec6e1d99c.png" target="_blank"><img src="media/726ce491e4eb25da71ea0c1ec6e1d99c.png" alt=""></a>
<figcaption><a class="self-link" href="#wegdek">Figuur <bdi class="figno">8</bdi></a> <span class="fig-title">3D Tiles weergave van het wegdek via dwarsdoorsnede en voxels van het gehele wegdek (bron: Rijkswaterstaat) </span></figcaption>
</figure>

<p>Figuur B laat het belang zien van het ontsluitingsvraagstuk van dit type dataset
naar de verschillende projectteams en afdelingen binnen Rijkswaterstaat. Dit
stelt een projectteam in staat om een schatting te maken van de verandering van
een asset over tijd, zodat gerichte data inwinning kan plaatsvinden in opdracht
van RWS wanneer een asset zich in een kritieke toestand bevindt. Daarnaast
krijgt de gebruiker ook een inschatting in 3D om te bepalen of een speciaal
transport zich veilig door Nederland kan verplaatsen.</p>
<p>Bronnen: <a href="https://www.rijkswaterstaat.nl/zakelijk/zakendoen-met-rijkswaterstaat/werkwijzen/werkwijze-in-gww/data-eisen-rijkswaterstaatcontracten/doorrijprofielen">Data-eisen doorrijprofielen</a>, <a href="https://repository.tudelft.nl/record/uuid:ca9254d6-0f7b-4999-b62a-763eb5c95397">Clearance Measurement Validation For Highway Infrastructure With Use of LiDAR Point Clouds</a></p>
</section></section></section>
  <section id="standaard-ogc-3d-tiles"><div class="header-wrapper"><h2 id="x2-standaard-ogc-3d-tiles"><bdi class="secno">2. </bdi>Standaard OGC 3D Tiles</h2><a class="self-link" href="#standaard-ogc-3d-tiles" aria-label="Permalink for Section 2."></a></div>
<p>Dit hoofdstuk geeft een beschrijving van de belangrijkste onderdelen van de OGC
3D Tiles standaard.</p>
<section id="introductie"><div class="header-wrapper"><h3 id="x2-1-introductie"><bdi class="secno">2.1 </bdi>Introductie</h3><a class="self-link" href="#introductie" aria-label="Permalink for Section 2.1"></a></div>
<p>De OGC 3D Tiles-standaard is een set regels voor het organiseren en visualiseren
van 3D-gegevens. Het vertelt ons hoe tegelsets, die informatie over de locatie,
details en uiterlijk van de gegevens bevatten, moeten worden opgebouwd. Deze
tegelsets zijn gestapeld op elkaar en worden slim gebruikt om gegevens op
verschillende gedetailleerde niveaus weer te geven. Bovendien definieert de
standaard de ondersteuning voor verschillende gegevenstypen, waaronder
geometrie, texturen en metadata, en biedt het richtlijnen voor mediatypes en
encoding.</p>
<p>Naast het tegelsetformaat omvat de standaard specificaties voor het beheren van
ruimtelijke queries, zoals het bepalen van de zichtbaarheid van tegels op basis
van hun geometrische fout en het dynamisch laden van tegels op basis van de
kijkafstand van de gebruiker. Ook biedt het richtlijnen voor
implementatiedetails, zoals het gebruik van UTF-8-encoding voor JSON-bestanden
en unieke sleutels voor eigenschappen binnen JSON-objecten.</p>
</section><section id="tegelset"><div class="header-wrapper"><h3 id="x2-2-tegelset"><bdi class="secno">2.2 </bdi>Tegelset</h3><a class="self-link" href="#tegelset" aria-label="Permalink for Section 2.2"></a></div>
<p>In 3D Tiles verwijst een tegelset (tileset) naar een verzameling tegels
georganiseerd binnen een ruimtelijke gegevensstructuur, vertegenwoordigd door
een boom. Elke tegelset wordt beschreven door minstens één JSON-bestand met
metadata en een hiërarchie van tegelobjecten, waarvan elke tegel renderbare
inhoud kan bevatten.</p>
<pre><svg id="diagram-1" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="max-width: 605.6849975585938px;" viewBox="0 0 605.6849975585938 436"><style>
#diagram-1 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#diagram-1 .error-icon{fill:#552222;}#diagram-1 .error-text{fill:#552222;stroke:#552222;}#diagram-1 .edge-thickness-normal{stroke-width:2px;}#diagram-1 .edge-thickness-thick{stroke-width:3.5px;}#diagram-1 .edge-pattern-solid{stroke-dasharray:0;}#diagram-1 .edge-pattern-dashed{stroke-dasharray:3;}#diagram-1 .edge-pattern-dotted{stroke-dasharray:2;}#diagram-1 .marker{fill:#333333;stroke:#333333;}#diagram-1 .marker.cross{stroke:#333333;}#diagram-1 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#diagram-1 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#diagram-1 .cluster-label text{fill:#333;}#diagram-1 .cluster-label span{color:#333;}#diagram-1 .label text,#diagram-1 span{fill:#333;color:#333;}#diagram-1 .node rect,#diagram-1 .node circle,#diagram-1 .node ellipse,#diagram-1 .node polygon,#diagram-1 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#diagram-1 .node .label{text-align:center;}#diagram-1 .node.clickable{cursor:pointer;}#diagram-1 .arrowheadPath{fill:#333333;}#diagram-1 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#diagram-1 .flowchart-link{stroke:#333333;fill:none;}#diagram-1 .edgeLabel{background-color:#e8e8e8;text-align:center;}#diagram-1 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#diagram-1 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#diagram-1 .cluster text{fill:#333;}#diagram-1 .cluster span{color:#333;}#diagram-1 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#diagram-1 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
</style><g><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath LS-data LE-tileset.json" style="opacity: 1;" id="L-data-tileset.json"><path class="path" d="M116.63499450683595,171.5L120.7183278401693,171.41666666666666C124.80166117350261,171.33333333333334,132.96832784016928,171.16666666666666,141.21832784016928,171.08333333333334C149.46832784016928,171,157.8016611735026,171,161.96832784016928,171L166.13499450683594,171" marker-end="url(#arrowhead30)" style="fill:none"></path><defs><marker id="arrowhead30" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-tileset.json LE-1.0" style="opacity: 1;" id="L-tileset.json-1.0"><path class="path" d="M234.61371791109127,193L244.28393067704872,205C253.95414344300616,217,273.29456897492105,241,287.1314484075452,253C300.96832784016925,265,309.3016611735026,265,313.46832784016925,265L317.63499450683594,265" marker-end="url(#arrowhead31)" style="fill:none"></path><defs><marker id="arrowhead31" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-tileset.json LE-1.1" style="opacity: 1;" id="L-tileset.json-1.1"><path class="path" d="M228.70414344300616,149L239.35928528697778,129.16666666666666C250.01442713094943,109.33333333333333,271.3247108188927,69.66666666666667,289.7006854875713,49.833333333333336C308.07666015625,30,323.51832580566406,30,338.9599914550781,30C354.4016571044922,30,369.84332275390625,30,383.13498942057294,30C396.42665608723956,30,407.5683237711589,30,413.13915761311847,30L418.7099914550781,30" marker-end="url(#arrowhead32)" style="fill:none"></path><defs><marker id="arrowhead32" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-1.0 LE-b3dm" style="opacity: 1;" id="L-1.0-b3dm"><path class="path" d="M346.1880051633145,243L352.7041690366488,223.16666666666666C359.22033290998314,203.33333333333334,372.2526606566517,163.66666666666666,382.93549119665266,143.83333333333334C393.6183217366536,124,401.951655069987,124,406.1183217366536,124L410.2849884033203,124" marker-end="url(#arrowhead33)" style="fill:none"></path><defs><marker id="arrowhead33" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-1.0 LE-cmpt" style="opacity: 1;" id="L-1.0-cmpt"><path class="path" d="M360.2849884033203,243.36427582095254L364.451655069987,239.13689651746043C368.6183217366536,234.90951721396837,376.951655069987,226.4547586069842,385.5377667744954,222.22737930349209C394.1238784790039,218,402.9627685546875,218,407.3822135925293,218L411.8016586303711,218" marker-end="url(#arrowhead34)" style="fill:none"></path><defs><marker id="arrowhead34" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-1.0 LE-pnts" style="opacity: 1;" id="L-1.0-pnts"><path class="path" d="M360.2849884033203,286.63572417904743L364.451655069987,290.86310348253954C368.6183217366536,295.0904827860316,376.951655069987,303.54524139301583,386.0349884033203,307.7726206965079C395.1183217366536,312,404.951655069987,312,409.8683217366536,312L414.7849884033203,312" marker-end="url(#arrowhead35)" style="fill:none"></path><defs><marker id="arrowhead35" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-1.0 LE-i3dm" style="opacity: 1;" id="L-1.0-i3dm"><path class="path" d="M346.1880051633145,287L352.7041690366488,306.8333333333333C359.22033290998314,326.6666666666667,372.2526606566517,366.3333333333333,383.29799170527895,386.1666666666667C394.34332275390625,406,403.4016571044922,406,407.93082427978516,406L412.4599914550781,406" marker-end="url(#arrowhead36)" style="fill:none"></path><defs><marker id="arrowhead36" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-1.1 LE-shp" style="opacity: 1;" id="L-1.1-shp"><path class="path" d="M461.3599853515625,30L466.93081919352215,30C472.50165303548175,30,483.64332071940106,30,497.3779839590086,42C511.1126471986161,54,527.440305993912,78,535.6041353915599,90L543.7679647892079,102" marker-end="url(#arrowhead37)" style="fill:none"></path><defs><marker id="arrowhead37" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-b3dm LE-shp" style="opacity: 1;" id="L-b3dm-shp"><path class="path" d="M469.7849884033203,124L473.951655069987,124C478.1183217366536,124,486.451655069987,124,494.7849884033203,124C503.1183217366536,124,511.451655069987,124,515.6183217366537,124L519.7849884033203,124" marker-end="url(#arrowhead38)" style="fill:none"></path><defs><marker id="arrowhead38" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-i3dm LE-shp" style="opacity: 1;" id="L-i3dm-shp"><path class="path" d="M467.6099853515625,406L472.13915252685547,406C476.66831970214844,406,485.7266540527344,406,500.08265291038134,362.6666666666667C514.4386517680283,319.3333333333333,534.0923151327363,232.66666666666666,543.9191468150904,189.33333333333334L553.7459784974443,146" marker-end="url(#arrowhead39)" style="fill:none"></path><defs><marker id="arrowhead39" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-data-tileset.json" class="edgeLabel L-LS-data' L-LE-tileset.json"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-tileset.json-1.0" class="edgeLabel L-LS-tileset.json' L-LE-1.0"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-tileset.json-1.1" class="edgeLabel L-LS-tileset.json' L-LE-1.1"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-1.0-b3dm" class="edgeLabel L-LS-1.0' L-LE-b3dm"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-1.0-cmpt" class="edgeLabel L-LS-1.0' L-LE-cmpt"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-1.0-pnts" class="edgeLabel L-LS-1.0' L-LE-pnts"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-1.0-i3dm" class="edgeLabel L-LS-1.0' L-LE-i3dm"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-1.1-shp" class="edgeLabel L-LS-1.1' L-LE-shp"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-b3dm-shp" class="edgeLabel L-LS-b3dm' L-LE-shp"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-i3dm-shp" class="edgeLabel L-LS-i3dm' L-LE-shp"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" style="opacity: 1;" id="flowchart-data-20" transform="translate(62.06749725341797,171)"><polygon points="54.06749725341797,0 108.13499450683594,-54.06749725341797 54.06749725341797,-108.13499450683594 0,-54.06749725341797" transform="translate(-54.06749725341797,54.06749725341797)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-28.074996948242188,-12)"><foreignObject width="56.149993896484375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">3D Tiles</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-tileset.json-21" transform="translate(216.88499450683594,171)"><rect rx="0" ry="0" x="-50.75" y="-22" width="101.5" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-40.75,-12)"><foreignObject width="81.5" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">tileset.json</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-1.0-23" transform="translate(338.9599914550781,265)"><rect rx="0" ry="0" x="-21.324996948242188" y="-22" width="42.649993896484375" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-11.324996948242188,-12)"><foreignObject width="22.649993896484375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">1.0</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-1.1-25" transform="translate(440.0349884033203,30)"><rect rx="0" ry="0" x="-21.324996948242188" y="-22" width="42.649993896484375" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-11.324996948242188,-12)"><foreignObject width="22.649993896484375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">1.1</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-b3dm-27" transform="translate(440.0349884033203,124)"><rect rx="0" ry="0" x="-29.75" y="-22" width="59.5" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-19.75,-12)"><foreignObject width="39.5" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">b3dm</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-cmpt-29" transform="translate(440.0349884033203,218)"><rect rx="0" ry="0" x="-28.23332977294922" y="-22" width="56.46665954589844" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-18.23332977294922,-12)"><foreignObject width="36.46665954589844" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">cmpt</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-pnts-31" transform="translate(440.0349884033203,312)"><rect rx="0" ry="0" x="-25.25" y="-22" width="50.5" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-15.25,-12)"><foreignObject width="30.5" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">pnts</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-i3dm-33" transform="translate(440.0349884033203,406)"><rect rx="0" ry="0" x="-27.574996948242188" y="-22" width="55.149993896484375" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-17.574996948242188,-12)"><foreignObject width="35.149993896484375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">i3dm</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-shp-35" transform="translate(558.7349853515625,124)"><rect rx="5" ry="5" x="-38.94999694824219" y="-22" width="77.89999389648438" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-28.949996948242188,-12)"><foreignObject width="57.899993896484375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">glTF 2.0</div></foreignObject></g></g></g></g></g></g></svg></pre>
</section><section id="tegelformaten"><div class="header-wrapper"><h3 id="x2-3-tegelformaten"><bdi class="secno">2.3 </bdi>Tegelformaten</h3><a class="self-link" href="#tegelformaten" aria-label="Permalink for Section 2.3"></a></div>
<p>Het primaire tegelformaat voor 3D Tiles is glTF 2.0, een open specificatie
ontworpen voor efficiënte transmissie en laden van 3D-inhoud. Dit formaat omvat
geometrie, textuurinformatie en kan worden uitgebreid met metadata,
model-instanciëring en compressie. Het ondersteunt verschillende soorten
3D-inhoud zoals 3D-modellen (figuur 9) en puntenwolken.</p>
<figure id="huis"> 
<a href="media/huis.png" target="_blank"><img src="media/huis.png" alt=""></a>
<figcaption><a class="self-link" href="#huis">Figuur <bdi class="figno">9</bdi></a> <span class="fig-title">3D model van een huis in glTF 2.0 formaat</span></figcaption>
</figure>

<p>Naast glTF ondersteunt 3D Tiles ook de volgende tegelformaten:</p>
<p>1. Batched 3D Model (b3dm): Dit formaat wordt gebruikt voor heterogene
3D-modellen.</p>
<p>2. Instanced 3D Model (i3dm): Gebruikt voor het instanceren van 3D-modellen,
zoals bomen, windmolens, en bouten.</p>
<p>3. Point Cloud (pnts): Voor het weergeven van grote aantallen punten in een
puntenwolk.</p>
<p>4. Composite (cmpt): Hiermee kunnen tegels van verschillende formaten worden
samengevoegd tot één tegel.</p>
</section><section id="mediatypes-en-encoding"><div class="header-wrapper"><h3 id="x2-4-mediatypes-en-encoding"><bdi class="secno">2.4 </bdi>Mediatypes en encoding</h3><a class="self-link" href="#mediatypes-en-encoding" aria-label="Permalink for Section 2.4"></a></div>
<p>Het 3D Tiles-bestandsformaat gebruikt verschillende mediatypes en encoding, zie
onderstaande tabel.</p>
<table>
<thead>
<tr>
<th>Extensie</th>
<th>Media Type</th>
<th>Toepassing</th>
</tr>
</thead>
<tbody><tr>
<td>.json</td>
<td>application/json</td>
<td>tegelset-, metagegevensschema-, tegelsetstijl- en JSON-subtree-bestanden</td>
</tr>
<tr>
<td>.subtree</td>
<td>application/octet-stream</td>
<td>binaire subtree-bestanden</td>
</tr>
<tr>
<td>.bin</td>
<td>application/octet-stream</td>
<td>binaire bufferbestanden</td>
</tr>
</tbody></table>
<p>JSON-bestanden gebruiken UTF-8-encoding zonder BOM, met ASCII-tekenreeks-charset
en unieke sleutels; niet-ASCII-tekens worden geëscapet volgens RFC 8259, Sectie
6.</p>
</section><section id="geometric-error"><div class="header-wrapper"><h3 id="x2-5-geometric-error"><bdi class="secno">2.5 </bdi>Geometric error</h3><a class="self-link" href="#geometric-error" aria-label="Permalink for Section 2.5"></a></div>
<p>In een 3D-omgeving worden tegels georganiseerd in een boomstructuur, waarbij
elke tegel verschillende niveaus van detail vertegenwoordigt om te bepalen hoe
gedetailleerd een tegel moet worden weergegeven. Deze tegelsets zijn
verzamelingen van tegels die samen een groter oppervlak vormen, terwijl
kindertegels kleinere tegels binnen een grotere tegel zijn die helpen bij het
opbouwen van gedetailleerde structuren.</p>
<p>De geometrische fout van een tegel vertelt ons hoe nauwkeurig de vorm van die
tegel overeenkomt met het originele object, gemeten in meters.</p>
<p>Bij het bekijken van een 3D-scène op een apparaat, wordt de geometrische fout
van elke tegel geëvalueerd. Als de fout binnen een aanvaardbaar bereik ligt,
wordt de tegel getoond. Als de fout te groot is, wat betekent dat de tegel niet
gedetailleerd genoeg is, wordt de tegel verfijnd door gedetailleerdere
kindertegels te laden en te tonen.</p>
<p>De grootte van de fout (<em>geometric error</em>) hangt af van hoe belangrijk het is om
de details van het object nauwkeurig weer te geven (figuur 10). Een hogere fout betekent dat
het programma eerder beslist om de tegel te verfijnen en de details weer te
geven.</p>
<figure id="Figuur_10"> 
<a href="media/geometric_error.png" target="_blank"><img src="media/geometric_error.png" alt=""></a>
<figcaption><a class="self-link" href="#Figuur_10">Figuur <bdi class="figno">10</bdi></a> <span class="fig-title">Geometric error gedefinieerd in tileset.json, voor panden met verschillend detail niveau</span></figcaption>
</figure>

</section><section id="implicit-tiling"><div class="header-wrapper"><h3 id="x2-6-implicit-tiling"><bdi class="secno">2.6 </bdi>Implicit tiling</h3><a class="self-link" href="#implicit-tiling" aria-label="Permalink for Section 2.6"></a></div>
<p>Implicit tiling in 3D Tiles is een methode om 3D-gegevens op een gestructureerde
en efficiënte manier te organiseren. Het verdeelt de gegevens in een regelmatig
patroon van tegels, vergelijkbaar met hoe een mozaïek is opgebouwd. Hierdoor
kunnen gebruikers snel en eenvoudig specifieke tegels identificeren en
benaderen, wat vooral handig is bij het werken met grote 3D-omgevingen. Explicit
tiling daarentegen is een techniek waarbij een oppervlak wordt bedekt met vooraf
gedefinieerde tegels, in plaats van tegels die dynamisch worden gegenereerd.</p>
<p>Implicit tiling vereenvoudigt quadtrees en octrees in 3D Tiles, waardoor snelle
toegang mogelijk is via tegelcoördinaten. Dit verbetert ruimtelijke queries,
doorloopalgoritmen en updates van tegels.</p>
<p>Bovendien maakt implicit tiling betere interoperabiliteit mogelijk met bestaande
GIS-gegevensformaten met impliciet gedefinieerde tegelindelingen, zoals TMS,
WMTS, S2 en CDB.</p>
<p>Om grote hoeveelheden gegevens efficiënt te beheren, worden tegels gecreëerd en
georganiseerd op basis van bijbehorende metadata. Bij zeer omvangrijke datasets
wordt deze metadata opgedeeld en verdeeld in subtrees met een vast formaat. Deze
subtrees bevatten informatie over welke tegels aanwezig zijn en welke inhoud ze
bevatten, waardoor het beheer van de dataset geoptimaliseerd wordt.</p>
<p>Een implicitTiling-object kan worden toegevoegd aan tegels in het JSON-bestand
van de tegelset. Hiermee wordt bepaald hoe de tegel wordt verdeeld en waar
inhoud is opgeslagen. Het kan aan meerdere tegels worden toegevoegd voor
complexere indelingen. De implementatie van deze tegels omvat details zoals
verschillende verdeelschema's, strategieën voor verfijning en toegang tot
inhoud.</p>
</section><section id="metadata"><div class="header-wrapper"><h3 id="x2-7-metadata"><bdi class="secno">2.7 </bdi>Metadata</h3><a class="self-link" href="#metadata" aria-label="Permalink for Section 2.7"></a></div>
<p>De OGC 3D Tiles specificaties beschrijven uitgebreide metadata om 3D-tiles
efficiënt te beheren en weer te geven. Deze metadata omvat diverse aspecten
zoals:</p>
<ol>
<li><p><em>Geografische locatie:</em> Informatie over de precieze positie van een tegel in
een geografisch coördinatensysteem. Dit kan details bevatten zoals de
noord-, zuid-, oost- en westgrenzen van de tegel.</p>
</li>
<li><p><em>Schaal en resolutie:</em> Details over de schaal en resolutie van de tegel, die
aangeven hoe gedetailleerd de informatie binnen de tegel is. Dit helpt bij
het selecteren van de juiste tegels voor verschillende zoomniveaus.</p>
</li>
<li><p><em>Niveaus van detail (LOD):</em> Informatie over de verschillende niveaus van
detail die binnen een tegel beschikbaar zijn, waardoor systemen kunnen
kiezen hoe gedetailleerd ze een gebied weergeven op basis van de beschikbare
resources en de benodigde nauwkeurigheid.</p>
</li>
<li><p><em>Relaties tussen tegels:</em> Metadata die de hiërarchie en relaties tussen
tegels beschrijft, zoals ouder-kind-relaties tussen grotere tegels en hun
kleinere kindertegels. Dit helpt bij het efficiënte beheer van tegels en het
navigeren door de tegelstructuur.</p>
</li>
<li><p><em>Tegel identificatie:</em> Unieke aanduidingen (identificaties) voor elke tegel,
wat essentieel is voor het beheren en opvragen van specifieke tegels binnen
een groot 3D-tiling systeem.</p>
</li>
<li><p><em>Bounding volumes:</em> Informatie over de 3D-grenzen van een tegel, zoals
bounding boxes of bounding spheres, die helpen bij het snel bepalen van
zichtbaarheid en bij het uitvoeren van ruimtelijke queries.</p>
</li>
<li><p><em>Formatinformatie:</em> Details over het bestandsformaat en de compressie van de
tegelgegevens, wat belangrijk is voor de juiste interpretatie en weergave
van de tegels.</p>
</li>
</ol>
</section></section>
    
  <section id="best-practices"><div class="header-wrapper"><h2 id="x3-best-practices"><bdi class="secno">3. </bdi>Best practices</h2><a class="self-link" href="#best-practices" aria-label="Permalink for Section 3."></a></div>
<p>Dit hoofdstuk beschrijft een aantal best practices voor het serveren en
gebruiken van 3D tiles. Deze best practices zijn gebaseerd op de expertise en
praktijkervaring van de auteurs met betrekking tot het genereren, serveren en
gebruiken van 3D-tiling, zoals beschreven in deze handleiding</p>
<p>De best practices zijn beschreven aan de hand van vier onderwerpen (zie figuur 11):</p>
<figure id="indelingbp"> 
<a href="media/indeling_best_practises.png" target="_blank"><img src="media/indeling_best_practises.png" alt=""></a>
<figcaption><a class="self-link" href="#indelingbp">Figuur <bdi class="figno">11</bdi></a> <span class="fig-title">Het werken met 3D Tiles</span></figcaption>
</figure>

<p><strong>Genereren van 3D Tiles</strong></p>
<ol>
<li><p><a href="https://geonovum.github.io/3d-tiling/#attribuutgegevens">Attribuutgegevens:</a>
Gebruik van attribuutgegevens voor het verrijken van de 3D tiles en het
verbeteren van de visualisatie.</p>
</li>
<li><p><a href="https://geonovum.github.io/3d-tiling/#explicit-en-implicit-tiling">Explicit en implicit
tiling:</a>
Dit betreft de methoden en structuren die worden gebruikt om tiles te
genereren.</p>
</li>
<li><p><a href="https://geonovum.github.io/3d-tiling/#geometric-error-0">Geometric error:</a>
Dit is een belangrijke parameter bij het genereren van tiles om de
nauwkeurigheid van de geometrie te bepalen.</p>
</li>
<li><p><a href="https://geonovum.github.io/3d-tiling/#offset-z-coordinaat">Offset
Z-coördinaat:</a>
Aanpassing van de Z-coördinaat bij het genereren van tiles om nauwkeurige
plaatsing te garanderen.</p>
</li>
<li><p><a href="https://geonovum.github.io/3d-tiling/#optimale-set-aan-parameters">Optimale set aan
parameters:</a>
Dit omvat de parameters die worden ingesteld bij het genereren van tiles
voor optimale prestaties.</p>
</li>
<li><p><a href="https://geonovum.github.io/3d-tiling/#shader">Shader:</a> Instellingen en
optimalisaties van shaders voor het weergeven van 3D tiles.</p>
</li>
<li><p><a href="https://geonovum.github.io/3d-tiling/#formaat">Formaat:</a> De keuze van het
formaat waarin de 3D tiles worden opgeslagen tijdens het genereren.</p>
</li>
<li><p><a href="https://geonovum.github.io/3d-tiling/#compressie">Compressie:</a> Technieken
om de gegenereerde tiles te comprimeren voor efficiëntere opslag en
transmissie.</p>
</li>
</ol>
<p><strong>Valideren van 3D Tiles</strong></p>
<ol>
<li><a href="https://geonovum.github.io/3d-tiling/#valideren-van-3d-tiles">Valideren van 3D
tiles:</a>
Methoden en tools om de juistheid en integriteit van de gegenereerde tiles
te controleren.</li>
</ol>
<p><strong>Publiceren van 3D Tiles</strong></p>
<ol>
<li><p><a href="https://geonovum.github.io/3d-tiling/#ogc-api-geovolumes">OGC API
GeoVolumes:</a>
Specificaties en standaarden voor het publiceren en toegankelijk maken van
3D tiles via API's.</p>
</li>
<li><p><a href="#metadata-0">Metadata:</a> Het toevoegen van beschrijvende gegevens aan de
tiles om ze beter vindbaar en bruikbaar te maken bij publicatie.</p>
</li>
</ol>
<p><strong>Gebruiken van 3D Tiles</strong></p>
<ol>
<li><p><a href="https://geonovum.github.io/3d-tiling/#minimal-zoom">Minimal zoom:</a> Bepalen
van het minimale zoomniveau waarop tiles worden weergegeven.</p>
</li>
<li><p><a href="https://geonovum.github.io/3d-tiling/#kleur-en-belichting">Kleur en
belichting:</a>
Instellingen voor kleur en belichting bij het gebruik van 3D tiles.</p>
</li>
<li><p><a href="https://geonovum.github.io/3d-tiling/#wcag">WCAG:</a> Overwegingen voor
toegankelijkheid volgens de Web Content Accessibility Guidelines bij het
gebruik van tiles.</p>
</li>
<li><p><a href="https://geonovum.github.io/3d-tiling/#coordinaten-van-scherm-terrein-en-camera-doelobject">Coördinaten van scherm/terrein en
camera/doelobject:</a>
Beheer van coördinaten bij het weergeven en gebruiken van tiles.</p>
</li>
<li><p><a href="https://geonovum.github.io/3d-tiling/#diepte-vlak-depth-plane">Diepte vlak (depth
plane):</a>
Gebruik van dieptevlakken voor correcte rendering van tiles in
3D-omgevingen.</p>
</li>
</ol>
<section id="genereren-van-3d-tiles"><div class="header-wrapper"><h3 id="x3-1-genereren-van-3d-tiles"><bdi class="secno">3.1 </bdi>Genereren van 3D Tiles</h3><a class="self-link" href="#genereren-van-3d-tiles" aria-label="Permalink for Section 3.1"></a></div>
<section id="attribuutgegevens"><div class="header-wrapper"><h4 id="x3-1-1-attribuutgegevens"><bdi class="secno">3.1.1 </bdi>Attribuutgegevens</h4><a class="self-link" href="#attribuutgegevens" aria-label="Permalink for Section 3.1.1"></a></div>
<blockquote>
<p>  Neem alleen de attributen op die nodig zijn voor visualisatie of voor het
  opvragen van extra informatie via een andere server.</p>
</blockquote>
<p>Het zorgvuldig kiezen van welke attributen worden opgenomen in 3D Tiles-datasets
is van belang voor efficiënt gegevensbeheer. Door enkel de essentiële attributen
toe te voegen, wordt onnodige gegevensuitwisseling voorkomen, wat de prestaties
verbetert en de netwerkbelasting vermindert. Daarnaast kan het selectief opnemen
van attributen waarop veelvuldig gefilterd wordt helpen bij het optimaliseren
van de dataset voor specifieke gebruiksscenario's.</p>
<p>Het opvragen van extra informatie via een andere server op basis van een unieke
identificatie biedt real-time toegang tot actuele gegevens. Dit is vooral
gunstig bij dynamische datasets, waarbij voorkomen wordt dat 3D Tiles
herhaaldelijk gegenereerd moeten worden, of in situaties waar een hoge mate van
actualiteit vereist is, zoals bij bepaalde publieke taken, zoals het verstrekken
van toeslagen of vergunningen.</p>
<p>Bovendien maakt deze aanpak gecontroleerde toegang mogelijk op basis van
autorisatie, waardoor bijvoorbeeld de privacy en beveiliging van
persoonsgegevens worden gewaarborgd.</p>
</section><section id="explicit-en-implicit-tiling"><div class="header-wrapper"><h4 id="x3-1-2-explicit-en-implicit-tiling"><bdi class="secno">3.1.2 </bdi>Explicit en implicit tiling</h4><a class="self-link" href="#explicit-en-implicit-tiling" aria-label="Permalink for Section 3.1.2"></a></div>
<blockquote>
<p>  Pas implicit tiling toe voor grotere datasets.</p>
</blockquote>
<p>Bij het kiezen tussen implicit en explicit tiling is het belangrijk om te
beseffen dat de keuze sterk afhankelijk is van de specifieke
implementatiedetails aan zowel de generatie- als de gebruikerskant (de
webviewer).</p>
<p>In het algemeen kan gesteld worden dat:</p>
<ol>
<li><p>Implicit tiling interessant is, vooral voor grote datasets.</p>
</li>
<li><p>Het aan te raden is om zowel implicit als explicit tiling te testen voor de
beoogde toepassing. Dit komt omdat de ondersteuning voor implicit tiling nog
steeds evolueert en zelfs populaire platforms zoals Cesium nog enkele
uitdagingen hebben, vooral bij zeer grote datasets.</p>
</li>
</ol>
<p>Door beide tiling-methoden te testen, kan de beste keuze worden gemaakt op basis
van de specifieke behoeften en omstandigheden van een project.</p>
<blockquote>
<p>  Voor terreinen, zoals landschappen en terreinmodellen, is explicit tiling
  vaak geschikt omdat ze vaak grote, uitgestrekte gebieden beslaan met een
  relatief uniforme geometrie. Hierdoor kunnen terreinen efficiënt worden
  opgedeeld in regelmatige tegels, waardoor snelle toegang en weergave op
  verschillende detailniveaus mogelijk is. Deze regelmatige structuur maakt
  het ook gemakkelijker om te navigeren en details te renderen op basis van de
  afstand tot de kijker.</p>
</blockquote>
<blockquote>
<p>  Aan de andere kant zijn gebouwen vaak complexe structuren met verschillende
  vormen, maten en details. Voor gebouwen kan implicit tiling gunstig zijn
  omdat het meer flexibiliteit biedt in het opdelen van de gegevens op basis
  van de geometrische complexiteit. Dit maakt het mogelijk om gebouwen op te
  delen in tegels die zich aanpassen aan de vorm van het gebouw en de
  detailniveaus, wat efficiënter kan zijn voor de opslag en rendering van
  complexe(re) gebouwen.</p>
</blockquote>
<p>Daarnaast is er ook een alternatief voor implicit tiling: explicit tiling met
externe tilesets. Dit kan ook een goede optie zijn voor grote datasets. Net als
bij implicit tiling wordt hiermee de grootte van het tileset.json-bestand
significant kleiner. Dit bestand moet namelijk volledig worden ingelezen voordat
er iets in de viewer kan worden getoond. De grootte van dit tileset.json-bestand
is cruciaal voor een goede prestatie bij het laden van de 3D-tiles dataset. Als
dit bestand te groot is, kan het enkele seconden duren voordat het geladen is,
wat de gebruikerservaring niet ten goede komt.</p>
<p>Nog enkele aandachtspunten en technische details:</p>
<ul>
<li><p>Implicit tiling is minder flexibel wat betreft de tegelmethode, omdat het
alleen quadtree of octree kan zijn. Dit betekent onder andere dat je niet
per tegel de hoogte precies kunt instellen op het hoogste gebouw in de
tegel, wat weer implicaties kan hebben voor de prestaties in de viewer.</p>
</li>
<li><p>Er is minder controle over de geometrische fout bij implicit tiling. Deze
wordt namelijk altijd door 2 gedeeld voor een volgend tegelniveau.</p>
</li>
<li><p>Wat betreft prestaties hangt veel af van hoe de subtrees in implicit tiling
worden gegenereerd en hoe ze worden geconsumeerd in de viewer.</p>
</li>
</ul>
<p>Let op: standaard 1.0 ondersteunt geen implicit tiling, vanaf 1.1 wel. Veel
clients zitten nog op 1.0, dus implicit tiling is niet in elke client
beschikbaar.</p>
</section><section id="geometric-error-0"><div class="header-wrapper"><h4 id="x3-1-3-geometric-error"><bdi class="secno">3.1.3 </bdi>Geometric error</h4><a class="self-link" href="#geometric-error-0" aria-label="Permalink for Section 3.1.3"></a></div>
<blockquote>
<p>  Kies een drempelwaarde voor geometric error op basis van het gewenste zoom-
  en detailniveau.</p>
</blockquote>
<p>De geometrische fout (<em>geometric error</em>) van een tegel wordt gebruikt in 3D
Tiles om te bepalen hoe gedetailleerd een tegel moet worden weergegeven. De
grootte van de fout hangt af van hoe belangrijk het is om de details van het
object nauwkeurig weer te geven, waarbij een hogere fout betekent dat het
programma eerder beslist om de tegel te verfijnen en de details weer te geven.</p>
<p>Voor verschillende toepassingen zijn verschillende drempelwaarden voor de
geometric error van LOD-modellen van belang. Voor gebouwen op LOD2 zou een
drempelwaarde tussen 1 en 10 meter geschikt zijn. Bij terreinmodellen op LOD1,
bekeken op een schaal van 1:10.000, zou een drempelwaarde tussen 10 en 50 meter
passend zijn. Voor een schaal van 1:50.000 zou een waarde tussen 50 en 100 meter
geschikt zijn. Deze drempelwaarden zijn afhankelijk van verschillende factoren
zoals het beoogde gebruiksscenario, beschikbare rekenkracht en gewenste visuele
kwaliteit. Zo biedt een lagere geometric error meer detail, maar vereist het
meer rekenkracht. Het is cruciaal om de optimale drempelwaarde te bepalen op
basis van specifieke tests en evaluaties, rekening houdend met de vereisten van
het project en de doelsystemen.</p>
<p>Bij implicit tiling wordt de geometrische fout deels vastgesteld. Je stelt een
waarde in voor de root tegel, en deze waarde wordt vervolgens eenvoudigweg door
2 gedeeld voor elk volgend niveau onder de root tegel. Bij explicit tiling
daarentegen kun je de geometrische fout afzonderlijk instellen voor iedere
tegel.</p>
</section><section id="offset-z-coordinaat"><div class="header-wrapper"><h4 id="x3-1-4-offset-z-coordinaat"><bdi class="secno">3.1.4 </bdi>Offset Z-coördinaat</h4><a class="self-link" href="#offset-z-coordinaat" aria-label="Permalink for Section 3.1.4"></a></div>
<blockquote>
<p>  Stem de offset van de Z-coördinaat van 3D Tiles af op het specifieke
  coördinatensysteem of op die van andere 3D Tiles datasets.</p>
</blockquote>
<p>Het is belangrijk om ervoor te zorgen dat de offset van de Z-coördinaat correct
wordt toegepast om eventuele verticale verschuivingen tussen het
coördinatensysteem van het model en het gewenste referentiesysteem te
corrigeren. Dit kan bijvoorbeeld nodig zijn om het model op de juiste hoogte
boven het maaiveldoppervlak te plaatsen of om ervoor te zorgen dat het model
correct uitgelijnd is met andere lagen.</p>
<p>Het bepalen van de juiste offsetwaarde vereist meestal enige kennis van het
coördinatensysteem van het model en het gewenste referentiesysteem, evenals
eventuele verschillen in hoogteniveaus tussen die systemen (figuur 12). Het is aan te raden
om de offset zorgvuldig te kalibreren en te testen om ervoor te zorgen dat het
model nauwkeurig wordt gepositioneerd in de gewenste context.</p>
<blockquote>
<p>  Let op! De aarde is niet plat. Bij het gebruik van 3D-tile viewers zoals
  Cesium wordt de hoogte bepaald ten opzichte van de ellipsoïde, terwijl
  hoogten in Nederland worden gemeten ten opzichte van de geoïde van het
  Normaal Amsterdams Peil (NAP). Dit verschil kan resulteren in een verschil
  in hoogtemeters tussen de geoïde en de ellipsoïde.</p>
</blockquote>
<figure id="hoogtebepaling"> 
<a href="media/339c8243cd7bd7f34afeddd2c13b2422.png" target="_blank"><img src="media/339c8243cd7bd7f34afeddd2c13b2422.png" alt=""></a>
<figcaption><a class="self-link" href="#hoogtebepaling">Figuur <bdi class="figno">12</bdi></a> <span class="fig-title">Hoogtebepaling verschillen bij gebruik ellipsoïde ten opzichte van de geoïde</span></figcaption>
</figure>

<p>Het is belangrijk om hiermee rekening te houden bij het visualiseren van
3D-data, aangezien de hoogtecorrectie kan variëren, zelfs binnen Nederland.
Onderstaande figuur 13 toont het hoogteverschil tussen NAP-geoide en WGS84
ellipsiode in Nederland. Het gebruik van dit hoogteverschil als Z-offset is vaak
noodzakelijk om nauwkeurige hoogtevisualisaties te garanderen.</p>
<figure id="hoogteverschil"> 
<a href="media/80200791c0a5947c9226bb7e2e6c0c9e.png" target="_blank"><img src="media/80200791c0a5947c9226bb7e2e6c0c9e.png" alt=""></a>
<figcaption><a class="self-link" href="#hoogteverschil">Figuur <bdi class="figno">13</bdi></a> <span class="fig-title">Het hoogteverschil tussen NAP-geoide en WGS84 ellipsiode in Nederland</span></figcaption>
</figure>

</section><section id="optimale-set-aan-parameters"><div class="header-wrapper"><h4 id="x3-1-5-optimale-set-aan-parameters"><bdi class="secno">3.1.5 </bdi>Optimale set aan parameters</h4><a class="self-link" href="#optimale-set-aan-parameters" aria-label="Permalink for Section 3.1.5"></a></div>
<blockquote>
<p>  Experimenteer met de optimale parameters voor o.m. LODs, zoomlevels en
  generalisatie voor 3D Tiles generatie.</p>
</blockquote>
<p>Een best practice bij het genereren van 3D-tilesets is het zorgvuldig finetunen
van verschillende parameters om optimale visualisaties te verkrijgen. Parameters
zoals levels, CityGML Level of Detail (LoD), refinement, object size filter,
geometry generalization en textures zijn van invloed op de weergave in de
viewer. Er is geen universele set instellingen, omdat deze afhankelijk zijn van
de inputdata, visuele presentatie en persoonlijke voorkeur.</p>
<ul>
<li><p><strong>Levels:</strong> Kies op welk zoomniveau de tileset wordt gegenereerd. Levels 14,
15 en 16 worden vaak gebruikt, waarbij het laagste level als eerste wordt
geladen in een viewer.</p>
</li>
<li><p><strong>CityGML Level of Detail:</strong> Kies het gewenste detailniveau voor gebouwen
(LoD1 of LoD2) die in de CityGML-data beschikbaar zijn. Stel indien mogelijk
een fallback LOD in voor het geval het voorkeursniveau niet beschikbaar is.</p>
</li>
<li><p><strong>Refinement:</strong> Kies tussen Add en Replace om de tileset te verfijnen. Bij
Add wordt de tileset opgebouwd per zoomniveau, terwijl bij Replace elk
gebouw op elk zoomniveau wordt gegenereerd.</p>
</li>
<li><p><strong>Object size filter:</strong> Stel voor elk zoomniveau een objectgrootte in op
basis van de diagonaal van het object om de zichtbaarheid van gebouwen op
verschillende afstanden te optimaliseren.</p>
</li>
<li><p><strong>Geometry generalization:</strong> Pas generalisatie toe op de geometrie om de
grootte van de tileset te verminderen. Dit is vooral handig bij het
vervangen van refinement.</p>
</li>
<li><p><strong>Textures:</strong> Kies texturen op basis van CityGML-appearance, een enkele
kleur of specificeer kleuren op basis van CityGML-klassen. Stem de kwaliteit
van texturen af op het zoomniveau voor optimale prestaties.</p>
</li>
</ul>
<p>Door deze parameters zorgvuldig af te stemmen, kunnen 3D Tilesets optimaal
worden gegenereerd voor verschillende toepassingen en gebruiksscenario's. Het is
belangrijk om te experimenteren en de instellingen aan te passen op basis van de
input-data, visuele presentatie en persoonlijke voorkeur.</p>
</section><section id="shader"><div class="header-wrapper"><h4 id="x3-1-6-shader"><bdi class="secno">3.1.6 </bdi>Shader</h4><a class="self-link" href="#shader" aria-label="Permalink for Section 3.1.6"></a></div>
<blockquote>
<p>  Kies voor Physically Based Rendering (PBR) als shader voor 3D Tiles.</p>
</blockquote>
<p>Het gebruik van PBR-shaders voor 3D Tiles biedt een toekomstbestendige oplossing
voor het creëren van hoogwaardige en realistische 3D-modellen. PBR-shaders zijn
gebaseerd op fysische principes van lichtinteractie, wat resulteert in visueel
consistente weergaven van materialen onder verschillende
belichtingsomstandigheden. Deze benadering zorgt ervoor dat je 3D-modellen er
realistisch uitzien in zowel huidige als toekomstige renderomgevingen en
softwareplatforms.</p>
<p>Niet alle shaders zijn echter even toekomstbestendig. Traditionele shaders die
gebaseerd zijn op ad-hoc benaderingen van materiaalweergave kunnen snel
verouderd raken en moeilijk te onderhouden zijn naarmate nieuwe
renderingtechnologieën evolueren. Het kiezen van PBR als shader voor 3D Tiles
garandeert niet alleen een hoog niveau van visuele kwaliteit, maar biedt ook een
flexibele basis voor aanpassingen en updates in de toekomst.</p>
</section><section id="formaat"><div class="header-wrapper"><h4 id="x3-1-7-formaat"><bdi class="secno">3.1.7 </bdi>Formaat</h4><a class="self-link" href="#formaat" aria-label="Permalink for Section 3.1.7"></a></div>
<blockquote>
<p>  Kies GLB als het juiste formaat voor 3D-tiles</p>
</blockquote>
<p>GLB, wat staat voor GL Transmission Format Binary, is de gecomprimeerde variant
van GLTF (GL Transmission Format). glTF 2.0 is het primaire tegelformaat voor 3D
Tiles vanaf versie 1.1.</p>
<p>In vergelijking met B3DM heeft GLB verschillende voordelen. Ten eerste wordt
B3DM uitgefaseerd, wat betekent dat het mogelijk niet langer wordt ondersteund
in toekomstige software-updates en ontwikkelingen. Dit kan leiden tot
compatibiliteitsproblemen en beperkte interoperabiliteit met nieuwe platforms en
tools. Dit maakt GLB een toekomstbestendige keuze.</p>
<p>Daarnaast is GLB over het algemeen compacter en efficiënter gecomprimeerd dan
B3DM, wat resulteert in kleinere bestandsgroottes en snellere overdrachtstijden.
Dit maakt het bijzonder geschikt voor webgebaseerde toepassingen en mobiele
platforms waar bandbreedte en laadtijden van cruciaal belang zijn.</p>
<p>Door te kiezen voor GLB vermijdt men potentiële complicaties en
compatibiliteitsproblemen die kunnen ontstaan bij het gebruik van verouderde
formaten zoals 3BM. Dit maakt GLB een verstandige keuze voor het
toekomstbestendig opslaan en uitwisselen van 3D-gegevens.</p>
</section><section id="compressie"><div class="header-wrapper"><h4 id="x3-1-8-compressie"><bdi class="secno">3.1.8 </bdi>Compressie</h4><a class="self-link" href="#compressie" aria-label="Permalink for Section 3.1.8"></a></div>
<blockquote>
<p>  Gebruik geometriecompressie in GLB-bestanden</p>
</blockquote>
<p>Om de prestaties van een 3D Tiles-viewer te verbeteren, raden we aan om
geometriecompressie te gebruiken voor GLB-bestanden. Draco en meshopt zijn beide
populaire tools voor geometriecompressie die kunnen helpen om de bestandsgrootte
van een GLB-bestanden aanzienlijk te verkleinen, terwijl de visuele kwaliteit
behouden blijft. Door geometriecompressie toe te passen, kan de laadtijd van
3D-modellen verkorten en de algehele prestaties van 3D Tiles-viewer verbeteren.</p>
<p>Om de laadtijd van een 3D Tiles verder te verbeteren, raden we aan om
gzip-compressie toe te passen bij het serveren van de 3D Tiles, met name voor
het tileset.json-bestand. Gzip-compressie kan de bestandsgrootte aanzienlijk
verminderen, waardoor de downloadtijd wordt verkort zonder afbreuk te doen aan
de kwaliteit van de gegevens. Dit helpt bij het optimaliseren van de prestaties
van een 3D Tiles-viewer, vooral bij het laden van grote en complexe datasets.</p>
</section></section><section id="valideren-van-3d-tiles"><div class="header-wrapper"><h3 id="x3-2-valideren-van-3d-tiles"><bdi class="secno">3.2 </bdi>Valideren van 3D tiles</h3><a class="self-link" href="#valideren-van-3d-tiles" aria-label="Permalink for Section 3.2"></a></div>
<blockquote>
<p>  Valideer de 3D Tilesets</p>
</blockquote>
<p>Het is sterk aan te raden om 3D Tilesets te valideren voordat ze worden
geserveerd. Het gebruik van een tool zoals de 3D Tiles Validator
(<a href="https://github.com/CesiumGS/3d-tiles-validator">https://github.com/CesiumGS/3d-tiles-validator</a>) kan helpen bij het
identificeren van mogelijke fouten in tilesets voordat ze worden geïntegreerd in
een applicatie. Door Tilesets te valideren, kunnen potentiële problemen met de
gegevenskwaliteit, structuur of prestaties opsporen en corrigeren, wat
resulteert in een betere gebruikerservaring en soepele werking van een 3D
Tiles-viewer.</p>
</section><section id="publiceren-van-3d-tiles"><div class="header-wrapper"><h3 id="x3-3-publiceren-van-3d-tiles"><bdi class="secno">3.3 </bdi>Publiceren van 3D Tiles</h3><a class="self-link" href="#publiceren-van-3d-tiles" aria-label="Permalink for Section 3.3"></a></div>
<section id="ogc-api-geovolumes"><div class="header-wrapper"><h4 id="x3-3-1-ogc-api-geovolumes"><bdi class="secno">3.3.1 </bdi>OGC API GeoVolumes</h4><a class="self-link" href="#ogc-api-geovolumes" aria-label="Permalink for Section 3.3.1"></a></div>
<blockquote>
<p>  Serveer 3D Tiles met behulp van OGC API GeoVolumes</p>
</blockquote>
<p>Om 3D Tiles efficiënt te serveren met de OGC API GeoVolumes, implementeert u
eerst de OGC API GeoVolumes op de server. Zorg ervoor dat de 3D Tiles-datasets
correct zijn gegenereerd en georganiseerd volgens de specificaties van de OGC
API GeoVolumes. Publiceer vervolgens de 3D Tiles-datasets op een server volgens
de OGC API GeoVolumes-specificaties, waarbij de endpoints correct geconfigureerd
moeten zijn voor gemakkelijke toegang tot de gegevens door gebruikers.</p>
</section><section id="metadata-0"><div class="header-wrapper"><h4 id="x3-3-2-metadata"><bdi class="secno">3.3.2 </bdi>Metadata</h4><a class="self-link" href="#metadata-0" aria-label="Permalink for Section 3.3.2"></a></div>
<blockquote>
<p>  Publiceer metadata van een 3D Tileset</p>
</blockquote>
<p>Het publiceren van metadata van een 3D Tileset, bijvoorbeeld in het Nationaal
Georegister, is essentieel voor het bevorderen van het gebruik en de
vindbaarheid van gegevens.</p>
<p>Het is belangrijk om relevante informatie op te nemen, zoals:</p>
<ul>
<li><p>Coördinatenreferentiesysteem: Beschrijf het coördinatenreferentiesysteem dat
wordt gebruikt voor de 3D Tileset, inclusief de gebruikte eenheden en de
verticale en horizontale datums.</p>
</li>
<li><p>Geometrische fout (Geometric Error): Geef de geometrische fout aan die is
toegepast bij het genereren van de 3D Tileset. Dit is belangrijk voor het
beoordelen van de nauwkeurigheid van de gegevens.</p>
</li>
<li><p>Brondata voor het genereren van de 3D Tiles: Geef informatie over de
brondata die is gebruikt bij het genereren van de 3D Tileset, zoals de bron
van de terreingegevens, luchtfoto's, satellietbeelden of andere
gegevensbronnen.</p>
</li>
</ul>
<p>Door deze informatie op te nemen in de metadata van een 3D Tileset, worden de
gegevens gemakkelijker vindbaar en bruikbaar voor anderen, wat de uitwisseling
en het hergebruik van de 3D informatie bevordert.</p>
</section></section><section id="gebruiken-van-3d-tiles"><div class="header-wrapper"><h3 id="x3-4-gebruiken-van-3d-tiles"><bdi class="secno">3.4 </bdi>Gebruiken van 3D Tiles</h3><a class="self-link" href="#gebruiken-van-3d-tiles" aria-label="Permalink for Section 3.4"></a></div>
<section id="minimal-zoom"><div class="header-wrapper"><h4 id="x3-4-1-minimal-zoom"><bdi class="secno">3.4.1 </bdi>Minimal zoom</h4><a class="self-link" href="#minimal-zoom" aria-label="Permalink for Section 3.4.1"></a></div>
<blockquote>
<p>  Stel een minimale zoom in op de client-side voor het laden van 3D
  Tiles-gegevens.</p>
</blockquote>
<p>Het instellen van een minimale zoom op de client-side bij het laden van 3D
Tiles-gegevens is essentieel om de prestaties te optimaliseren en onnodige
belasting van het systeem te voorkomen. Door een minimale zoom in te stellen,
bijvoorbeeld vanaf zoomniveau 14 of hoger, kan worden voorkomen dat er onnodig
veel tegels worden opgehaald en geladen vanaf lagere zoomniveaus zoals 10 of 12.</p>
<p>Dit biedt verschillende voordelen. Ten eerste verkort het de algehele laadtijd
en verbetert het de efficiëntie van de gegevensweergave door alleen tegels vanaf
het gespecificeerde zoomniveau te laden. Vooral bij grote kaart bounding boxes
kan het laden van tegels vanaf lagere zoomniveaus aanzienlijk meer gegevens
vereisen dan nodig is, wat de prestaties nadelig kan beïnvloeden.</p>
<p>Bovendien zijn veel 3D Tiles-sets geoptimaliseerd om vanaf een bepaald
zoomniveau in te laden, zoals bijvoorbeeld geschikt voor zoomniveaus 14, 15 en
16. Door een minimale zoom in te stellen die overeenkomt met het optimale
zoomniveau van de gegevensset, kan worden gegarandeerd dat alleen de meest
geschikte en gedetailleerde tegels worden geladen voor een optimale
gebruikerservaring.</p>
<p>Kortom, het instellen van een minimale zoom op de client-side is een effectieve
manier om onnodige belasting van het systeem te verminderen, de laadtijd te
verkorten en de efficiëntie van de gegevensweergave te verbeteren, vooral bij
het werken met grote (landsdekkende) en gedetailleerde 3D Tiles-gegevenssets.</p>
</section><section id="kleur-en-belichting"><div class="header-wrapper"><h4 id="x3-4-2-kleur-en-belichting"><bdi class="secno">3.4.2 </bdi>Kleur en belichting</h4><a class="self-link" href="#kleur-en-belichting" aria-label="Permalink for Section 3.4.2"></a></div>
<blockquote>
<p>  Neem een lamp achter de viewer op voor voldoende contrast.</p>
</blockquote>
<p>Het opnemen van een lamp achter de kijker in een 3D-scene kan aanzienlijk
bijdragen aan het creëren van voldoende contrast en visuele helderheid. Dit is
met name belangrijk in scenario's waarbij de gebruiker interactie heeft met
driedimensionale gegevens, zoals kaarten of modellen. Door een lamp achter de
kijker te plaatsen, wordt de scène gelijkmatig verlicht, waardoor details
duidelijker zichtbaar worden en de visuele ervaring wordt verbeterd.</p>
<p>Voor veel use cases is tijdafhankelijke belichting niet noodzakelijk is. In veel
gevallen gaat het om het presenteren van statische informatie, zoals
kaartbeelden, die consistent moeten blijven, ongeacht het tijdstip van de dag.
Het toevoegen van dynamische verlichtingseffecten, zoals zonlicht dat op
verschillende tijdstippen van de dag verandert, kan overbodig zijn en de
visualisatie voor een toepassing nadelig beïnvloeden.</p>
<p>Daarom is het vaak voldoende om een statische lichtbron achter de kijker op te
nemen, die zorgt voor een gelijkmatige verlichting van de scène zonder rekening
te houden met het tijdstip van de dag. Dit zorgt voor consistente kleuren en
contrasten, wat essentieel is voor een duidelijke en nauwkeurige visualisatie
van de gegevens (zie figuur 14).</p>
<p>Door te kiezen voor een eenvoudige, statische belichtingsopstelling kunnen
ontwikkelaars de prestaties van hun applicaties verbeteren en tegelijkertijd een
consistente visuele ervaring bieden aan gebruikers, ongeacht het moment waarop
ze de gegevens bekijken.</p>
<figure id="vbkleurbelichting"> 
<a href="media/16ca5ef04f7cfb12dbf4a794acb88d9e.png" target="_blank"><img src="media/16ca5ef04f7cfb12dbf4a794acb88d9e.png" alt=""></a>
<figcaption><a class="self-link" href="#vbkleurbelichting">Figuur <bdi class="figno">14</bdi></a> <span class="fig-title">Voorbeeld van toepassing kleur en belichting (bron: Kadaster)</span></figcaption>
</figure>

<p>Let op: Kleur en belichting is ook gerelateerd aan de shader. De shader bepaalt
namelijk de relatie tussen het materiaal op de 3D-objecten en de belichting.</p>
</section><section id="wcag"><div class="header-wrapper"><h4 id="x3-4-3-wcag"><bdi class="secno">3.4.3 </bdi>WCAG</h4><a class="self-link" href="#wcag" aria-label="Permalink for Section 3.4.3"></a></div>
<blockquote>
<p>  Minimaliseer visuele barrières in 3D Tile visualisaties door zo dicht
  mogelijk bij de Web Content Accessibility Guidelines (WCAG) te blijven.</p>
</blockquote>
<p>Hoewel de visualisatie van 3D Tiles zelf (waarschijnlijk) niet volledig aan de
WCAG-richtlijnen hoeft te voldoen, is het toch aan te raden om zo dicht mogelijk
bij deze richtlijnen te blijven. WCAG staat voor de "Web Content Accessibility
Guidelines" en is een reeks richtlijnen voor het verbeteren van de
toegankelijkheid van webinhoud voor mensen met verschillende handicaps,
inclusief visuele, auditieve, motorische, spraak- en cognitieve beperkingen.</p>
<p>Hoewel de visualisatie van 3D Tiles zelf niet altijd gemakkelijk toegankelijk is
voor alle gebruikers, is het van cruciaal belang dat de interactieve elementen
in de browser, zoals knoppen en eventuele testen in pop-ups, voldoen aan de
WCAG-richtlijnen. Deze richtlijnen helpen ervoor te zorgen dat webinhoud voor
iedereen begrijpelijk en bruikbaar is (figuur 15), ongeacht eventuele beperkingen. Het
naleven van deze richtlijnen verbetert niet alleen de gebruikerservaring voor
mensen met handicaps, maar kan ook bijdragen aan een bredere acceptatie en
bruikbaarheid van de applicatie.</p>
<figure id="WCAG">
<a href="media/c21340f6daebe690a347b9d1ea9887bf.png" target="_blank"><img src="media/c21340f6daebe690a347b9d1ea9887bf.png" alt=""></a>
<figcaption><a class="self-link" href="#WCAG">Figuur <bdi class="figno">15</bdi></a> <span class="fig-title">WCAG richtlijnen</span></figcaption>
</figure>

</section><section id="coordinaten-van-scherm-terrein-en-camera-doelobject"><div class="header-wrapper"><h4 id="x3-4-4-coordinaten-van-scherm-terrein-en-camera-doelobject"><bdi class="secno">3.4.4 </bdi>Coördinaten van scherm/terrein en camera/doelobject</h4><a class="self-link" href="#coordinaten-van-scherm-terrein-en-camera-doelobject" aria-label="Permalink for Section 3.4.4"></a></div>
<blockquote>
<p>  Houd rekening met coördinaten van scherm/terrein en camera/doelobject</p>
</blockquote>
<p>Bij het ontwikkelen van een clienttoepassing met 3D Tiles moet de ontwikkelaar
rekening houden met het verschil tussen schermcoördinaten en terreincoördinaten
bij kaartinteracties zoals klikken op objecten, evenals met de viewpoints
(camerapositie) en focuspoints (doelobject) bij het wisselen tussen 2D en 3D.</p>
<p>Het is essentieel om het verschil tussen schermcoördinaten (x, y) en
terreincoördinaten (geografische coördinaten) te begrijpen bij het implementeren
van klikfunctionaliteit in een kaartvenster met 3D Tiles. Doordat de
schermcoördinaten moeten worden vertaald naar terreincoördinaten, kan het
voorkomen dat een gebruiker op een locatie klikt die overeenkomt met een ander
object dan verwacht, wat tot verwarring kan leiden. Daarom is het nodig om
zorgvuldig om te gaan met de coördinatentransformaties om ervoor te zorgen dat
de juiste objecten worden geselecteerd of aangeklikt.</p>
<p>Bovendien vereist het wisselen tussen 2D- en 3D-weergaven in een
clienttoepassing extra aandacht. Bijvoorbeeld, in een platform zoals Cesium
wordt de 2D-weergave opgebouwd op basis van de camerapositie, niet op basis van
de positie van het object waar naar gekeken werd in de 3D-scene. Dit kan leiden
tot verwarring bij gebruikers, omdat de weergave kan veranderen wanneer er wordt
geschakeld tussen 2D en 3D. Het implementeren van intelligentie en logica om
naadloze overgangen mogelijk te maken tussen 2D- en 3D-weergaven is dus
noodzakelijk om de gebruikerservaring te verbeteren en verwarring te voorkomen.</p>
</section><section id="diepte-vlak-depth-plane"><div class="header-wrapper"><h4 id="x3-4-5-diepte-vlak-depth-plane"><bdi class="secno">3.4.5 </bdi>Diepte vlak (depth plane)</h4><a class="self-link" href="#diepte-vlak-depth-plane" aria-label="Permalink for Section 3.4.5"></a></div>
<blockquote>
<p>  Gebruik de instelling <em>depthTestAgainstTerrain=true</em> om objecten realistisch
  op de grond te plaatsen en de dieptewaarneming van de scène te verbeteren.</p>
</blockquote>
<p>Een "depth plane" fungeert als een referentievlak in een 3D-omgeving,
vergelijkbaar met de grond waarop we lopen in de echte wereld. Het helpt
computers om te begrijpen hoe objecten zich tot elkaar verhouden in de diepte
van een scène, wat cruciaal is voor het realistisch renderen van 3D-beelden.
Stel je voor dat je door een raam naar buiten kijkt. Het glas van het raam zou
het depth plane zijn, en alles wat je daarachter ziet, is wat zich in de echte
wereld buiten bevindt.</p>
<p>Wanneer de instelling <code>depthTestAgainstTerrain = true;</code> wordt ingeschakeld,
wordt aan de computer verteld om rekening te houden met dit depth plane bij het
renderen van objecten. Dit zorgt ervoor dat objecten op een natuurlijke manier
op de grond worden geplaatst, waardoor ze er echt uitzien en passen bij de
omgeving. Het is als het correct plaatsen van een puzzelstukje, waardoor het
perfect past in het geheel en de 3D-scène tot leven komt.</p>
<p>Het activeren van deze instelling verbetert niet alleen de visuele esthetiek van
de 3D-weergave, maar draagt ook bij aan een beter begrip van diepte in de scène.
Bijvoorbeeld, wanneer je een virtuele stad verkent, helpt dit om een gevoel van
afstand en verhoudingen te krijgen, waardoor de ervaring aantrekkelijker en
meeslepender wordt voor de gebruiker. Dit draagt bij aan de algehele
professionele uitstraling van 3D-toepassingen en verhoogt de betrokkenheid van
de gebruiker.</p>
</section></section></section>
    
  <section id="toolkit"><div class="header-wrapper"><h2 id="x4-toolkit"><bdi class="secno">4. </bdi>Toolkit</h2><a class="self-link" href="#toolkit" aria-label="Permalink for Section 4."></a></div>
<section id="handleidingen"><div class="header-wrapper"><h3 id="x4-1-handleidingen"><bdi class="secno">4.1 </bdi>Handleidingen</h3><a class="self-link" href="#handleidingen" aria-label="Permalink for Section 4.1"></a></div>
<p>In deze sectie vind je een verzameling handleidingen en how-to's die je
stapsgewijs begeleiden bij het werken met 3D Tiles. Of je nu een beginner bent
die net begint met het gebruik van 3D Tiles of een ervaren ontwikkelaar die op
zoek is naar geavanceerde tips en technieken, deze handleidingen bieden
praktische instructies en voorbeelden om je te helpen bij het maken, laden,
visualiseren en optimaliseren van 3D-gegevenssets met behulp van 3D Tiles.</p>
<section id="howto-quickstartguide-3d-tiles"><div class="header-wrapper"><h4 id="x4-1-1-howto-quickstartguide-3d-tiles"><bdi class="secno">4.1.1 </bdi>HowTo: QuickStartGuide 3D Tiles</h4><a class="self-link" href="#howto-quickstartguide-3d-tiles" aria-label="Permalink for Section 4.1.1"></a></div>
<p><a href="https://3dtilesnederland.nl/quick-start-guide/">https://3dtilesnederland.nl/quick-start-guide/</a></p>
</section><section id="howto-3d-tiles-in-mapbox"><div class="header-wrapper"><h4 id="x4-1-2-howto-3d-tiles-in-mapbox"><bdi class="secno">4.1.2 </bdi>HowTo: 3D Tiles in Mapbox</h4><a class="self-link" href="#howto-3d-tiles-in-mapbox" aria-label="Permalink for Section 4.1.2"></a></div>
<p><a href="https://github.com/Geodan/mapbox-3dtiles?tab=readme-ov-file">https://github.com/Geodan/mapbox-3dtiles?tab=readme-ov-file</a></p>
</section><section id="howto-genereren-van-3d-tiles-met-virtual-city-systems"><div class="header-wrapper"><h4 id="x4-1-3-howto-genereren-van-3d-tiles-met-virtual-city-systems"><bdi class="secno">4.1.3 </bdi>HowTo: Genereren van 3D tiles met Virtual City Systems</h4><a class="self-link" href="#howto-genereren-van-3d-tiles-met-virtual-city-systems" aria-label="Permalink for Section 4.1.3"></a></div>
<p>Bij het genereren van 3D tilesets kunnen een aantal parameters in Virtual City
Systems toegepast worden die invloed hebben op de wijze waarop deze tilesets
getoond worden in een viewer. Deze parameters zijn:</p>
<ul>
<li><p>Levels</p>
</li>
<li><p>CityGML Level of Detail (0, 1, 2, 3, 4)</p>
</li>
<li><p>Refinement (Add, Replace)</p>
</li>
<li><p>Object size filter</p>
</li>
<li><p>Geometry generalization</p>
</li>
<li><p>Textures (CityGML Appearance, Single color, Specify colors based on CityGML
classes)</p>
</li>
</ul>
<p>Er is geen aanbeveling mogelijk voor één set aan instellingen, omdat dit
afhankelijk is van de input-data, de visuele presentatie en ook de persoonlijke
smaak. Daarnaast zijn verschillende parameters onderling afhankelijk van elkaar.</p>
<section id="levels"><div class="header-wrapper"><h5 id="x4-1-3-1-levels"><bdi class="secno">4.1.3.1 </bdi>Levels</h5><a class="self-link" href="#levels" aria-label="Permalink for Section 4.1.3.1"></a></div>
<p>Bij deze optie wordt gekozen op welk zoomlevel een tileset wordt aangemaakt. Het
is mogelijk meerdere levels in te stellen, die gezamenlijk een tileset vormen.
Voor elk level moeten dan de hieronder beschreven parameters ingesteld worden.
Levels die vaak gebruikt worden zijn 14, 15 en 16. Het level met het laagste
getal is degene die als eerste wordt geladen in een viewer. De objecten in dit
level liggen verder weg van het viewpoint dan de die in de hogere levels. Bij
het aanmaken van de levels wordt op de achtergrond een Geometric Error toegekend
aan elk level. Het laagste level heeft de hoogste Geometric Error.</p>
</section><section id="citygml-level-of-detail"><div class="header-wrapper"><h5 id="x4-1-3-2-citygml-level-of-detail"><bdi class="secno">4.1.3.2 </bdi>CityGML Level of Detail</h5><a class="self-link" href="#citygml-level-of-detail" aria-label="Permalink for Section 4.1.3.2"></a></div>
<p>Bij deze optie wordt gekozen welk Level of Detail gebruikt wordt die in de
CityGML-data aanwezig is. Voor gebouwen geldt dat LoD1 een eenvoudig
blokkenmodel is en LoD2 dakvormen heeft. LoD1 bevat minder detail, dus is ook
sneller in te laden. Omdat van veraf minder detail te zien is, kan ervoor worden
gekozen om op een lager zoomlevel LoD1 te gebruiken en in dezelfde tileset op
een hoger zoomlevel LoD2 te gebruiken. Dit kan het laadproces gunstig
beïnvloeden.</p>
<p>Het is ook raadzaam om een fallback LOD in te stellen, zoals LOD1, voor het
geval er geen LOD2 beschikbaar is in de brondataset. In formaten zoals CityGML
of CityJSON kunnen meerdere LODs voor een object worden opgenomen. Als het
voorkeurs LOD niet beschikbaar is, zal het systeem automatisch teruggrijpen naar
het fallback LOD om het object op te nemen in de 3D Tile.</p>
<p><a href="https://geonovum.github.io/IMGeo-dev/catalogus/imgeo/media/878e3b785d756b4ed69cacd71c875236.png">https://geonovum.github.io/IMGeo-dev/catalogus/imgeo/media/878e3b785d756b4ed69cacd71c875236.png</a></p>
</section><section id="object-size-filter"><div class="header-wrapper"><h5 id="x4-1-3-3-object-size-filter"><bdi class="secno">4.1.3.3 </bdi>Object size filter</h5><a class="self-link" href="#object-size-filter" aria-label="Permalink for Section 4.1.3.3"></a></div>
<p>Deze optie is alleen te gebruiken bij de Add refinement. Voor elk zoomlevel kan
een object size gekozen worden, die gebaseerd is op de diagonaal van het object.
Bijvoorbeeld op level 14 alle gebouwen groter dan 100m, op level 15 alle
gebouwen tussen 50m en 100m en op level 16 alle gebouwen kleiner dan 50m.</p>
</section><section id="geometry-generalization"><div class="header-wrapper"><h5 id="x4-1-3-4-geometry-generalization"><bdi class="secno">4.1.3.4 </bdi>Geometry generalization</h5><a class="self-link" href="#geometry-generalization" aria-label="Permalink for Section 4.1.3.4"></a></div>
<p>Deze optie is alleen te gebruiken bij de Replace refinement. Voor elk zoomlevel
kan een generalisatie toegepast worden, waarbij een marge wordt opgegeven
waarbinnen vertices van een object samengevoegd worden. Bijvoorbeeld op level 14
een generalisatie van 5m, op level 15 van 2m en op level 16 geen generalisatie.</p>
</section><section id="textures"><div class="header-wrapper"><h5 id="x4-1-3-5-textures"><bdi class="secno">4.1.3.5 </bdi>Textures</h5><a class="self-link" href="#textures" aria-label="Permalink for Section 4.1.3.5"></a></div>
<p>Bij het gebruik van CityGML Appearance kunnen bijvoorbeeld getextureerde
gebouwen aangemaakt worden. Het is niet aan te raden om hierbij LoD1 en 2 te
gebruiken, omdat LoD1 geen textures bevat. Het is wel mogelijk dit met object
size filter óf generalisatie te combineren. Het is verder mogelijk voor
verschillende zoomlevels de kwaliteit van de texture aan te passen, omdat van
veraf minder detail te zien is dan dichtbij.</p>
<p>Als voor Single color wordt gekozen is het wel goed mogelijk LoD1 en LoD2 te
combineren in de verschillende zoomlevels. Er wordt maar één kleur toegepast
voor alle objecten, eventueel met transparantie. Hierbij is het onderscheidt
tussen LoD1 en LoD2 op grote afstand niet te zien.</p>
<p>Bij het gebruik van Specify color based on CityGML classes krijgt elk vlak van
een gebouw zijn eigen kleur, mits ze gespecificeerd zijn in CityGML. Daken
worden bijvoorbeeld rood en muren grijs. Deze kleuren zijn aan te passen. Dit
geldt dan alleen voor LoD2 en hoger en daarom is het niet aan te raden om LoD1
en LoD2 te combineren in verschillende zoomlevels.</p>
</section><section id="refinement-0"><div class="header-wrapper"><h5 id="x4-1-3-6-refinement"><bdi class="secno">4.1.3.6 </bdi>Refinement</h5><a class="self-link" href="#refinement-0" aria-label="Permalink for Section 4.1.3.6"></a></div>
<p>Bij Refinement kan tussen de opties Add en Replace gekozen worden, die aan de
hand van onderstaande scenario’s worden toegelicht.</p>
<p>Als je in de verte kijkt, zie je in principe alleen maar grote gebouwen staan.
De kleine zijn niet zichtbaar doordat ze überhaupt te klein zijn of achter een
groter gebouw staan. Je kunt er dan voor kiezen om in de verte alleen grote
gebouwen te tonen. Iets dichterbij wil je alleen de grote en de middelgrote
gebouwen zien. En heel dichtbij ook de kleine gebouwen. Door de Add refinement
te gebruiken, wordt er een tileset aangemaakt met bijvoorbeeld op zoomniveau 14
de grote gebouwen, op zoomniveau 15 de middelgrote gebouwen en op zoomniveau 16
de kleine gebouwen. Elk gebouw komt maar 1x voor in de gehele tileset. Door het
inzoomen worden steeds meer gebouwen toegevoegd aan je view. Een nadeel is dat
het vaak wel opvalt dat er in de verte gebouwen ontbreken (zie bijvoorbeeld figuur 16).</p>
<figure id="refinement"> 
<a href="media/9eb82df57c2a50ab283807e3343f0e3c.jpeg" target="_blank"><img src="media/9eb82df57c2a50ab283807e3343f0e3c.jpeg" alt=""></a>
<figcaption><a class="self-link" href="#refinement">Figuur <bdi class="figno">16</bdi></a> <span class="fig-title">Vooorbeeld Refinement toegepast voor gebouwen</span></figcaption>
</figure>

<p>Als je in de verte kijkt, zie je weinig detail van gebouwen. Je kunt ervoor
kiezen om de geometrie wat te generaliseren, zodat de tileset minder zwaar
wordt. Bijvoorbeeld op zoomniveau 14 een generalisatie van 5m, op niveau 15 van
2m en op niveau 16 geen generalisatie. Hoe meer je inzoomt, hoe gedetailleerder
een gebouw moet zijn. Wat hier gebeurd is dat elk gebouw op elk zoomniveau
gegenereerd wordt. Elk gebouw komt dus 3x voor. Voordeel is dat je in de verte
altijd alle gebouwen ziet, maar het is vaak lastig in te stellen op welk
zoomniveau, welke generalisatie je toe moet passen. Daardoor blijft de
generalisatie vaak zichtbaar.</p>
</section></section></section><section id="viewers-generators-en-servers"><div class="header-wrapper"><h3 id="x4-2-viewers-generators-en-servers"><bdi class="secno">4.2 </bdi>Viewers, generators en servers</h3><a class="self-link" href="#viewers-generators-en-servers" aria-label="Permalink for Section 4.2"></a></div>
<p>In deze sectie vind je een overzicht van verschillende viewers en servers die
compatibel zijn met 3D Tiles. Of je nu op zoek bent naar een krachtige 3D-engine
om je 3D Tiles te visualiseren of een robuuste serveroplossing om je gegevens te
hosten, hier vind je een selectie van tools en platforms die je kunnen helpen
bij het werken met 3D Tiles. Van populaire game-engines tot gespecialiseerde
web-based viewers, deze lijst biedt een breed scala aan opties om aan je
specifieke behoeften te voldoen.</p>
<p>Voor een overzicht van nog meer viewers, zie</p>
<p><a href="https://github.com/pka/awesome-3d-tiles?tab=readme-ov-file">https://github.com/pka/awesome-3d-tiles?tab=readme-ov-file</a></p>
<section id="viewers"><div class="header-wrapper"><h4 id="x4-2-1-viewers"><bdi class="secno">4.2.1 </bdi>Viewers</h4><a class="self-link" href="#viewers" aria-label="Permalink for Section 4.2.1"></a></div>
<section id="cesium"><div class="header-wrapper"><h5 id="x4-2-1-1-cesium"><bdi class="secno">4.2.1.1 </bdi>Cesium</h5><a class="self-link" href="#cesium" aria-label="Permalink for Section 4.2.1.1"></a></div>
<p><a href="https://github.com/CesiumGS/cesium">Cesium</a> is een krachtige open-source
JavaScript-bibliotheek voor het maken van 3D-kaarten in de browser. Het biedt
ondersteuning voor het laden en weergeven van 3D Tiles, waardoor gebruikers
complexe 3D-gegevenssets kunnen visualiseren en analyseren in hun
webapplicaties.</p>
<p>Voorbeeld code:</p>
<pre><code class="javascript hljs" aria-busy="false"> <span class="hljs-keyword">var</span> tileset = viewer.<span class="hljs-property">scene</span>.<span class="hljs-property">primitives</span>.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">Cesium3DTileset</span>({
     url : <span class="hljs-string">'tileset.json'</span>
}));
</code></pre>
</section><section id="unity"><div class="header-wrapper"><h5 id="x4-2-1-2-unity"><bdi class="secno">4.2.1.2 </bdi>Unity</h5><a class="self-link" href="#unity" aria-label="Permalink for Section 4.2.1.2"></a></div>
<p><a href="https://unity.com/">Unity</a> is een populaire game-engine die wordt gebruikt voor
het maken van 3D- en 2D-games, simulaties en visualisaties. Met de Unity engine
kunnen ontwikkelaars 3D Tiles integreren om complexe geografische gegevenssets
te visualiseren en interactieve 3D-omgevingen te creëren.</p>
</section><section id="unreal-engine"><div class="header-wrapper"><h5 id="x4-2-1-3-unreal-engine"><bdi class="secno">4.2.1.3 </bdi>Unreal Engine</h5><a class="self-link" href="#unreal-engine" aria-label="Permalink for Section 4.2.1.3"></a></div>
<p><a href="https://www.unrealengine.com/">Unreal Engine</a> is een krachtige game-engine die
wordt gebruikt voor het maken van hoogwaardige 3D-content, waaronder games,
simulaties en visualisaties. Het ondersteunt de integratie van 3D Tiles,
waardoor ontwikkelaars gedetailleerde en realistische 3D-omgevingen kunnen maken
met behulp van de Unreal Engine.</p>
</section><section id="deck-gl"><div class="header-wrapper"><h5 id="x4-2-1-4-deck-gl"><bdi class="secno">4.2.1.4 </bdi>deck.gl</h5><a class="self-link" href="#deck-gl" aria-label="Permalink for Section 4.2.1.4"></a></div>
<p><a href="https://deck.gl/docs/api-reference/geo-layers/tile-3d-layer">dec<strong>k.gl</strong></a> is
een op WebGL gebaseerde 3D-rendering-engine die wordt gebruikt voor het maken
van geavanceerde 3D-visualisaties in de browser. Het ondersteunt de weergave van
3D Tiles, waardoor gebruikers gedetailleerde en interactieve 3D-gegevenssets
kunnen bekijken en analyseren.</p>
<p>Voorbeeld code:</p>
<pre><code class="javascript hljs" aria-busy="false"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TILESET_URL</span> = <span class="hljs-string">`tileset.json`</span>;

<span class="hljs-keyword">const</span> tile3DLayer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tile3DLayer</span>({
    <span class="hljs-attr">id</span>: <span class="hljs-string">'tile-3d-layer'</span>,
    <span class="hljs-attr">pointSize</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">data</span>: <span class="hljs-variable constant_">TILESET_URL</span>
});

<span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">DeckGL</span> <span class="hljs-attr">initialViewState</span>=<span class="hljs-string">{initialViewState}</span> <span class="hljs-attr">controller</span>=<span class="hljs-string">{true}</span> <span class="hljs-attr">layers</span>=<span class="hljs-string">{[tile3DLayer]}</span> /&gt;</span></span>;
</code></pre>
</section><section id="esri-javascript-sdk-arcgis-server"><div class="header-wrapper"><h5 id="x4-2-1-5-esri-javascript-sdk-arcgis-server"><bdi class="secno">4.2.1.5 </bdi>Esri JavaScript SDK / ArcGIS Server</h5><a class="self-link" href="#esri-javascript-sdk-arcgis-server" aria-label="Permalink for Section 4.2.1.5"></a></div>
<p>De <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-IntegratedMesh3DTilesLayer.html">Esri JavaScript
API</a>
biedt een krachtig platform voor het maken van webmapping-applicaties. Het
ondersteunt de integratie van 3D Tiles, waardoor ontwikkelaars complexe
3D-gegevenssets kunnen visualiseren en analyseren in hun webapplicaties.</p>
<p>Voorbeeld code: </p>
<pre><code class="javascript hljs" aria-busy="false"><span class="hljs-keyword">const</span> layer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntegratedMesh3DTilesLayer</span>({<span class="hljs-attr">url</span>: <span class="hljs-string">"tileset.json"</span>,<span class="hljs-attr">title</span>: <span class="hljs-string">"3D Tiles"</span>});
webscene.<span class="hljs-title function_">add</span>(layer);
</code></pre>
</section><section id="qgis"><div class="header-wrapper"><h5 id="x4-2-1-6-qgis"><bdi class="secno">4.2.1.6 </bdi>QGIS</h5><a class="self-link" href="#qgis" aria-label="Permalink for Section 4.2.1.6"></a></div>
<p>De open source GIS applicatie QGIS biedt een <a href="https://plugins.qgis.org/planet/tag/3d%20tiles/">QGIS plugin</a> voor voor de 3D scenes weergave van 3D Tiles datasets. De weergave van een 3D Tiles dataset kan worden aangepast door gebruik te maken van de stylingopties in QGIS. Dit omvat kleurtoewijzing, doorzichtigheid en andere visuele instellingen om de data beter in 3D te presenteren. Een van de voordelen van QGIS is de mogelijkheid om 3D Tiles datasets te combineren met andere GIS-data, zoals vectorlagen, rasterdata, en terreinmodellen. Dit maakt het mogelijk om complexe analyses uit te voeren en rijke visualisaties te creëren in QGIS.</p>
</section><section id="x3d-tiles-renderer"><div class="header-wrapper"><h5 id="x4-2-1-7-3d-tiles-renderer"><bdi class="secno">4.2.1.7 </bdi>3d-tiles-renderer</h5><a class="self-link" href="#x3d-tiles-renderer" aria-label="Permalink for Section 4.2.1.7"></a></div>
<p><a href="https://github.com/NASA-AMMOS/3DTilesRendererJS">3DtilesRendererJS</a> is een
JavaScript-bibliotheek die is ontworpen voor het renderen van 3D Tiles in
webapplicaties. Het biedt ondersteuning voor het laden en weergeven van
3D-gegevenssets, waardoor ontwikkelaars gedetailleerde en interactieve
3D-visualisaties kunnen maken in de browser.</p>
<p>Voorbeeld code: </p>
<pre><code class="javascript hljs" aria-busy="false"><span class="hljs-keyword">const</span> tilesRenderer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TilesRenderer</span>( <span class="hljs-string">'tileset.json'</span> );
tilesRenderer.<span class="hljs-title function_">setCamera</span>( camera );
tilesRenderer.<span class="hljs-title function_">setResolutionFromRenderer</span>( camera, renderer );
scene.<span class="hljs-title function_">add</span>( tilesRenderer.<span class="hljs-property">group</span> );

<span class="hljs-title function_">renderLoop</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderLoop</span>(<span class="hljs-params"></span>) {
    <span class="hljs-title function_">requestAnimationFrame</span>( renderLoop );
    camera.<span class="hljs-title function_">updateMatrixWorld</span>();
    tilesRenderer.<span class="hljs-title function_">update</span>();
    renderer.<span class="hljs-title function_">render</span>( scene, camera );
}
</code></pre>
</section></section><section id="generators-en-servers"><div class="header-wrapper"><h4 id="x4-2-2-generators-en-servers"><bdi class="secno">4.2.2 </bdi>Generators en servers</h4><a class="self-link" href="#generators-en-servers" aria-label="Permalink for Section 4.2.2"></a></div>
<section id="tyler"><div class="header-wrapper"><h5 id="x4-2-2-1-tyler"><bdi class="secno">4.2.2.1 </bdi>Tyler</h5><a class="self-link" href="#tyler" aria-label="Permalink for Section 4.2.2.1"></a></div>
<p><a href="https://github.com/3DGI/tyler">Tyler</a> is een innovatieve tool die speciaal is
ontworpen om 3D-tegels te maken van 3D-stadsobjecten. Het biedt een efficiënte
manier om CityJSON-functies om te zetten in geavanceerde 3D Tiles v1.1-formaat,
wat essentieel is voor het visualiseren en beheren van stedelijke gegevens in
drie dimensies.</p>
<p>Tyler neemt CityJSON-functies als invoer, waarbij elke functie afzonderlijk
wordt opgeslagen in een apart bestand. Vervolgens genereert Tyler 3D Tiles v1.1
als uitvoer. De belangrijkste kenmerken van de 3D Tiles-uitvoer zijn:</p>
<ul>
<li><p>Binaire glTF (.glb): De inhoud van de tileset is in binair glTF-formaat.</p>
</li>
<li><p>Feature Metadata: De glTF-assets bevatten metadata per CityObject,
gebruikmakend van EXT_mesh_features en EXT_structural_metadata extensies.</p>
</li>
<li><p>Ingekleurde Objecten: De objecten zijn voorzien van standaardkleuren, die
per CityObject-type kunnen worden aangepast.</p>
</li>
<li><p>Compressie: De glTF-bestanden zijn gecomprimeerd met behulp van
KHR_mesh_quantization en EXT_meshopt_compression extensies.</p>
</li>
<li><p>Impliciete Tiling: Ondersteuning voor impliciete tegelstructuren is
optioneel beschikbaar.</p>
</li>
</ul>
</section><section id="pg2b3dm"><div class="header-wrapper"><h5 id="x4-2-2-2-pg2b3dm"><bdi class="secno">4.2.2.2 </bdi>pg2b3dm</h5><a class="self-link" href="#pg2b3dm" aria-label="Permalink for Section 4.2.2.2"></a></div>
<p><a href="https://github.com/Geodan/pg2b3dm">pg2b3dm</a> is een tool waarmee 3D-geometrieën
vanuit PostGIS kunnen worden omgezet naar 3D Tiles. De gegenereerde 3D Tiles
kunnen worden gevisualiseerd in Cesium JS, Cesium for Unreal, Cesium for
Unity3D, Cesium for Omniverse, QGIS, ArcGIS Pro, ArcGIS Maps SDK for JavaScript,
Mapbox GL JS v3 (experimenteel) of andere 3D Tiles client viewers.</p>
</section><section id="i3dm-export"><div class="header-wrapper"><h5 id="x4-2-2-3-i3dm-export"><bdi class="secno">4.2.2.3 </bdi>I3dm.export</h5><a class="self-link" href="#i3dm-export" aria-label="Permalink for Section 4.2.2.3"></a></div>
<p><a href="https://github.com/Geodan/i3dm.export">I3dm.export</a> i3dm.export is een consoletool waarmee 
Instanced 3D Tiles gemaakt kunnen worden vanuit een PostGIS-tabel met punt geometrie. Deze tegels bevatten 
informatie over locatie, binair glTF-model (glb), schaal, rotatie en instantie-attributen. 
Zowel 3D Tiles 1.0 (via i3dm’s) als 3D Tiles 1.1 (via glTF extensie EXT_mesh_gpu_instancing) kunnen worden 
gegenereerd.</p>
</section><section id="vcs"><div class="header-wrapper"><h5 id="x4-2-2-4-vcs"><bdi class="secno">4.2.2.4 </bdi>VCS</h5><a class="self-link" href="#vcs" aria-label="Permalink for Section 4.2.2.4"></a></div>
<p><a href="https://vc.systems/en/">Virtual City Systems</a> biedt een krachtige tool voor het
genereren van 3D Tiles genaamd "CityServer3D". Met CityServer3D kunnen
gebruikers eenvoudig 3D-gegevens van verschillende bronnen importeren en
converteren naar het 3D Tiles-formaat. De gegenereerde 3D Tiles kunnen
vervolgens worden geïntegreerd in verschillende 3D-georuimtelijke toepassingen
en worden gevisualiseerd in populaire 3D Tiles-clients zoals Cesium, Mapbox GL
JS en andere. CityServer3D biedt ook geavanceerde functionaliteiten voor het
beheren, analyseren en presenteren van 3D-gegevens op schaalbare en efficiënte
wijze.</p>
</section><section id="x3d-geovolumes"><div class="header-wrapper"><h5 id="x4-2-2-5-3d-geovolumes"><bdi class="secno">4.2.2.5 </bdi>3D GeoVolumes</h5><a class="self-link" href="#x3d-geovolumes" aria-label="Permalink for Section 4.2.2.5"></a></div>
<p>De <a href="https://ogcapi.ogc.org/geovolumes/">OGC API – 3D GeoVolumes</a> is een
krachtige serveroplossing voor het serveren van 3D Tiles. Met deze server kunnen
3D-gegevenssets efficiënt worden gehost en toegankelijk gemaakt voor gebruik in
verschillende 3D-applicaties. Door het gebruik van de OGC API-standaard kunnen
3D Tiles datasets eenvoudig worden gepubliceerd en gedeeld met andere
gebruikers. GeoVolumes biedt een robuuste infrastructuur voor het leveren van
3D-gegevens op schaal, waardoor het ideaal is voor het hosten van grote
3D-modellen en het ondersteunen van geavanceerde 3D-toepassingen.</p>
</section></section></section><section id="x3d-tile-datasets-en-websites"><div class="header-wrapper"><h3 id="x4-3-3d-tile-datasets-en-websites"><bdi class="secno">4.3 </bdi>3D Tile Datasets en websites</h3><a class="self-link" href="#x3d-tile-datasets-en-websites" aria-label="Permalink for Section 4.3"></a></div>
<section id="x3d-basisvoorziening-kadaster"><div class="header-wrapper"><h4 id="x4-3-1-3d-basisvoorziening-kadaster"><bdi class="secno">4.3.1 </bdi>3D basisvoorziening Kadaster</h4><a class="self-link" href="#x3d-basisvoorziening-kadaster" aria-label="Permalink for Section 4.3.1"></a></div>
<p>De <a href="https://api.pdok.nl/kadaster/3d-basisvoorziening/ogc/v1_0">3D Basisvoorziening van het
Kadaster</a> is
beschikbaar op schaalniveaus tussen 1:500 en 1:10.000. De gegevens worden
geleverd als dataset per kaartblad, waarbij u zelf het gewenste kaartblad kunt
selecteren op de kaart van Nederland. De gegevens worden geleverd in een
zip-bestand, waarin een CityJSON-bestand is opgenomen. Een kaartbladbestand van
het 3D Basisbestand Volledig is ongeveer 200-700 MB groot. De kaartbladbestanden
van het 3D Basisbestand Gebouwen zijn aanzienlijk kleiner, terwijl het 3D
Hoogtestatistieken Gebouwen als één bestand voor heel Nederland wordt geleverd
in GeoPackage 1.2.</p>
<p>De 3D Basisvoorziening kan worden toegepast voor verschillende doeleinden, zoals
het maken van 3D-visualisaties, het uitvoeren van analyses van geluidsmodellen,
schaduwanalyses, analyse van zonnepotentie en afwateringsberekeningen. Het vormt
tevens een belangrijke basis voor gemeenten bij de planvorming en uitvoering van
projecten in het kader van de nieuwe Omgevingswet. Daarnaast is het een
waardevol visueel hulpmiddel in de communicatie met burgers over de impact van
plannen op de omgeving.</p>
</section><section id="x3d-tiles-nederland"><div class="header-wrapper"><h4 id="x4-3-2-3d-tiles-nederland"><bdi class="secno">4.3.2 </bdi>3D Tiles Nederland</h4><a class="self-link" href="#x3d-tiles-nederland" aria-label="Permalink for Section 4.3.2"></a></div>
<p><a href="https://3dtilesnederland.nl/3d-tilesets/">3DTilesNederland.nl</a> is een
samenwerkingsverband tussen de Vereniging van Nederlandse Gemeenten (VNG) en de
gemeenten Rotterdam, Amsterdam en Den Haag. De website zet zich in om het
verzamelen, beheren en benutten van 3D-data binnen gemeenten te bevorderen en te
ondersteunen.</p>
<p>Het streven is om gemeenten te helpen bij het gestandaardiseerd beschikbaar
stellen van lokaal ingewonnen 3D-data door gebruik te maken van de
internationale 3D Tiles-standaard. De website biedt praktische handleidingen,
instructies en ondersteuning voor het maken, publiceren en delen van
gedetailleerde 3D-modellen van steden, inclusief praktische informatie over het
benaderen van gepubliceerde 3D-data.</p>
<p>Daarnaast biedt 3DTilesNederland.nl verschillende tools zoals CesiumJS, Unreal
en Unity (Netherlands 3D) waarmee gemeenten realistische virtuele tours,
simulaties en trainingen kunnen ontwikkelen om burgers te informeren en
betrekken bij stadsplanning en andere gemeentelijke projecten.</p>
</section><section id="netherlands3d"><div class="header-wrapper"><h4 id="x4-3-3-netherlands3d"><bdi class="secno">4.3.3 </bdi>Netherlands3D</h4><a class="self-link" href="#netherlands3d" aria-label="Permalink for Section 4.3.3"></a></div>
<p><a href="https://netherlands3d.eu/">Netherlands3D</a> is een open-source Digitaal
Twin-framework dat is ontworpen voor Nederland. Met Netherlands3D kun je
gedetailleerde, op data gebaseerde modellen maken door middel van data
visualisatie.</p>
</section></section></section>
  
  <section id="tof" class="appendix"><div class="header-wrapper"><h2 id="a-lijst-met-figuren"><bdi class="secno">A. </bdi>Lijst met figuren</h2><a class="self-link" href="#tof" aria-label="Permalink for Appendix A."></a></div><ul class="tof">
        <li class="tofline">
    <a class="tocxref" href="#bro01"><span class="self-link">Figuur <bdi class="figno">1</bdi></span> <span class="fig-title">3D Tiles weergave bij BRO praktijkvoorbeeld Circulaire Grondstromen (bron: Geodan)</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#bro02"><span class="self-link">Figuur <bdi class="figno">2</bdi></span> <span class="fig-title">3D Tiles gebruik bij BRO praktijkvoorbeeld Circulaire Grondstromen (bron: Geodan)</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#rdam01"><span class="self-link">Figuur <bdi class="figno">3</bdi></span> <span class="fig-title">3D Tiles visualisatie van getextureerde gebouwen en bomen in Rotterdam 3D</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#rdam02"><span class="self-link">Figuur <bdi class="figno">4</bdi></span> <span class="fig-title">Een 3D Tiles kijkje in de Rotterdamse ondergrond</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#rdam03"><span class="self-link">Figuur <bdi class="figno">5</bdi></span> <span class="fig-title">Alle hoekwoningen in de wijk Ommoord</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#rdam04"><span class="self-link">Figuur <bdi class="figno">6</bdi></span> <span class="fig-title">3D Tiles ingezet voor het vergelijken van pandattributen uit WOZ en BAG</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#waterhoogtes"><span class="self-link">Figuur <bdi class="figno">7</bdi></span> <span class="fig-title">3D Tiles ingezet voor het weergegeven van waterhoogtes (bron: Imagem)</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#wegdek"><span class="self-link">Figuur <bdi class="figno">8</bdi></span> <span class="fig-title">3D Tiles weergave van het wegdek via dwarsdoorsnede en voxels van het gehele wegdek (bron: Rijkswaterstaat) </span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#huis"><span class="self-link">Figuur <bdi class="figno">9</bdi></span> <span class="fig-title">3D model van een huis in glTF 2.0 formaat</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#Figuur_10"><span class="self-link">Figuur <bdi class="figno">10</bdi></span> <span class="fig-title">Geometric error gedefinieerd in tileset.json, voor panden met verschillend detail niveau</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#indelingbp"><span class="self-link">Figuur <bdi class="figno">11</bdi></span> <span class="fig-title">Het werken met 3D Tiles</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#hoogtebepaling"><span class="self-link">Figuur <bdi class="figno">12</bdi></span> <span class="fig-title">Hoogtebepaling verschillen bij gebruik ellipsoïde ten opzichte van de geoïde</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#hoogteverschil"><span class="self-link">Figuur <bdi class="figno">13</bdi></span> <span class="fig-title">Het hoogteverschil tussen NAP-geoide en WGS84 ellipsiode in Nederland</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#vbkleurbelichting"><span class="self-link">Figuur <bdi class="figno">14</bdi></span> <span class="fig-title">Voorbeeld van toepassing kleur en belichting (bron: Kadaster)</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#WCAG"><span class="self-link">Figuur <bdi class="figno">15</bdi></span> <span class="fig-title">WCAG richtlijnen</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#refinement"><span class="self-link">Figuur <bdi class="figno">16</bdi></span> <span class="fig-title">Vooorbeeld Refinement toegepast voor gebouwen</span></a>
  </li>
      </ul></section>
  
  

<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>



<p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><div class="sidelabel">Geonovum Handreiking - Levend document</div><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body></html>